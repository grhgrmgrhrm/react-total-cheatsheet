# `Next.js` Guide :metal:

[–ù–∞ –≥–ª–∞–≤–Ω—É—é](../README.md)

> [–ü—Ä–∏–º–µ—Ä—ã](https://github.com/vercel/next.js/tree/canary/examples)&nbsp;&nbsp;üëÄ

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã](#–Ω–∞—á–∞–ª–æ-—Ä–∞–±–æ—Ç—ã)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
  - [–°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages)](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-pages)
  - [–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Data Fetching)](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-data-fetching)
  - [–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `CSS`](#–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è-–ø–æ–¥–¥–µ—Ä–∂–∫–∞-css)
  - [–ú–∞–∫–µ—Ç—ã (Layouts)](#–º–∞–∫–µ—Ç—ã-layouts)
  - [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Image` –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-image-–∏-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
  - [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-—à—Ä–∏—Ñ—Ç–æ–≤)
  - [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Script`](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-script)
  - [–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤](#–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö-—Ñ–∞–π–ª–æ–≤)
  - [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–≤-—Ä–µ–∂–∏–º–µ-—Ä–µ–∞–ª—å–Ω–æ–≥–æ-–≤—Ä–µ–º–µ–Ω–∏)
  - [`TypeScript`](#typescript)
  - [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-—Å—Ä–µ–¥—ã-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è](#–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
  - [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
  - [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã](#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ-—Ä–æ—É—Ç—ã)
  - [–ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞](#–∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π-–ø–æ–¥—Ö–æ–¥-–∫-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏-–Ω–∞-—Å—Ç–æ—Ä–æ–Ω–µ-–∫–ª–∏–µ–Ω—Ç–∞)
  - [–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è (—Ç–∏—Ö–∞—è) –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (Shallow Routing)](#–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è-—Ç–∏—Ö–∞—è-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è-shallow-routing)
- [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (API Routes)](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏-api-routes)
  - [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ-1)
  - [–ü–æ—Å—Ä–µ–¥–Ω–∏–∫–∏ (Middlewares)](#–ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∏-middleware)
  - [–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫-–ø—Ä–æ–¥–∞–∫—à–Ω—É)
  - [–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
  - [–£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ `JavaScript`](#—É–º–µ–Ω—å—à–µ–Ω–∏–µ-–∫–æ–ª–∏—á–µ—Å—Ç–≤–∞-–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ-javascript)
- [–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Authentication)](#–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è-authentication)
  - [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](#–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
  - [–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](#–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
  - [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è](#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
  - [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
  - [–≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏](#—ç–∫—Å–ø–æ—Ä—Ç-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π-—Ä–∞–∑–º–µ—Ç–∫–∏)
  - [–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∏ —Å–∏–Ω–æ–Ω–∏–º—ã –ø—É—Ç–µ–π –º–æ–¥—É–ª–µ–π](#–∞–±—Å–æ–ª—é—Ç–Ω—ã–π-–∏–º–ø–æ—Ä—Ç-–∏-—Å–∏–Ω–æ–Ω–∏–º—ã-–ø—É—Ç–µ–π-–º–æ–¥—É–ª–µ–π)
  - [–ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ—Ä–≤–µ—Ä](#–∫–∞—Å—Ç–æ–º–Ω—ã–π-—Å–µ—Ä–≤–µ—Ä)
  - [–ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](#–∫–∞—Å—Ç–æ–º–Ω–æ–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
  - [–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫](#–∫–∞—Å—Ç–æ–º–Ω—ã–µ-—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–æ—à–∏–±–æ–∫)
  - [–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src`](#–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è-src)
  - [–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)](#–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è-–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è-–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)
  - [–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [API](#api)
  - [Next CLI](#next-cli)
  - [Create Next App](#create-next-app)
  - [`next/router`](#nextrouter)
  - [`next/link`](#nextlink)
  - [`next/image`](#nextimage)
  - [`next/head`](#nexthead)
  - [`next/server`](#nextserver)
- [`next.config.js`](#nextconfigjs)

## –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `create-next-app`:

```bash
yarn create next-app app-name
# typescript
yarn create next-app app-name --typescript
```

–†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:

- —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
yarn add next react react-dom
```

- –æ–±–Ω–æ–≤–ª—è–µ–º `package.json`

```json
"scripts": {
  "dev": "next dev",
  "build": "next build",
  "start": "next start",
  "lint": "next lint"
}
```

–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
yarn dev
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages)

–°—Ç—Ä–∞–Ω–∏—Ü–∞ - —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `React`, –∫–æ—Ç–æ—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.js`, `.jsx`, `.ts` –∏–ª–∏ `.tsx`, –Ω–∞—Ö–æ–¥—è—â–µ–≥–æ—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages`. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å –º–∞—Ä—à—Ä—É—Ç–æ–º (—Ä–æ—É—Ç–æ–º) –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `pages/about.js` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/about`. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`export default`):

```js
export default function About() {
  return <div>–û –Ω–∞—Å</div>
}
```

–ú–∞—Ä—à—Ä—É—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `pages/posts/[id].js` –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º, —Ç.–µ. —Ç–∞–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º `posts/1`, `posts/2` –∏ —Ç.–¥.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ (pre-rendering). –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ `SEO`. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç—Å—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º `JS`. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è JS-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –µ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π (–¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–µ–π - hydration).

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 2 —Ñ–æ—Ä–º—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ (static generation, SSG, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥) –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (server-side rendering, SSR). –ü–µ—Ä–≤–∞—è —Ñ–æ—Ä–º–∞ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é `HTML` –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ. –í—Ç–æ—Ä–∞—è - –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ç–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º –ø–æ–¥—Ö–æ–¥–æ–º –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–ö—Ä–æ–º–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (client-side rendering), –∫–æ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º `JS`.

__SSG__

–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –º–æ–≥—É—Ç –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏, —Ç–∞–∫ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö.

_–ë–µ–∑ –¥–∞–Ω–Ω—ã—Ö_

```js
export default function About() {
  return <div>–û –Ω–∞—Å</div>
}
```

_–° –¥–∞–Ω–Ω—ã–º–∏_

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏:

1. –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getStaticProps`
2. –ü—É—Ç–∏ (paths) —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getStaticPaths` (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `getStaticProps`)

_–ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–æ–≥–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ –æ—Ç `CMS`:

```js
// TODO: –∑–∞–ø—Ä–æ—Å `posts`

export default function Blog({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>{post.title}</li>
      ))}
    </ul>
  )
}
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏–∑ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticProps`. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –≤–∏–¥–µ `props`:

```js
export default function Blog({ posts }) {
  // ...
}

export async function getStaticProps() {
  const posts = await (await fetch('https://example.com/posts'))?.json()

  // –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—É
  return {
    props: {
      posts
    }
  }
}
```

_–ü—É—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö_

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø—É—Ç–∏ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `pages/posts/[id].js`) –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticPaths`. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:

```js
export default function Post({ post }) {
  // ...
}

export async function getStaticPaths() {
  const posts = await (await fetch('https://example.com/posts'))?.json()

  // –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
  const paths = posts.map((post) => ({
    params: { id: post.id }
  }))

  // `fallback: false` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–ª—è –æ—à–∏–±–∫–∏ 404 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –º–∞—Ä—à—Ä—É—Ç
  return {
    paths,
    fallback: false
  }
}
```

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `pages/posts/[id].js` —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticProps` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º `id`:

```js
export default function Post({ post }) {
  // ...
}

export async function getStaticPaths() {
  // ...
}

export async function getStaticProps({ params }) {
  const post = await (await fetch(`https://example.com/posts/${params.id}`)).json()

  return {
    props: {
      post
    }
  }
}
```

__SSR__

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getServerSideProps`. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```js
function Page({ data }) {
  // ...
}

export async function getServerSideProps() {
  const data = await (await fetch('https://example.com/data'))?.json()

  return {
    props: {
      data
    }
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Data Fetching)

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 3 —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:

- `getStaticProps` (SSG): –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- `getStaticPaths` (SSG): –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–æ—É—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
- `getServerSideProps` (SSR): –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

__`getStaticProps`__

–°—Ç—Ä–∞–Ω–∏—Ü–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticProps`, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –ø—Ä–æ–ø–æ–≤.

```js
export async function getStaticProps(context) {
  return {
    props: {}
  }
}
```

`context` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `params` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ—É—Ç–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã —è–≤–ª—è–µ—Ç—Å—è `[id].js`, `params` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –≤–∏–¥ `{ id: ... }`
- `preview` - –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `true`, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `previewData` - –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å –ø–æ–º–æ—â—å—é `setPreviewData`
- `locale` - —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- `locales` - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–∫–∞–ª–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
- `defaultLocale` - –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –ª–æ–∫–∞–ª—å (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)

`getStaticProps` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `props` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –ø—Ä–æ–ø–∞–º–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `revalidate` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥, –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `false` - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–µ
- `notFound` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å 404 –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```js
export async function getStaticProps(context) {
  const res = await fetch('/data')
  const data = await res.json()

  if (!data) {
    return {
      notFound: true
    }
  }

  return {
    props: {
      data
    }
  }
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `notFound` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ `fallback: false`, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—É—Ç–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ `getStaticPaths`.

_–¢–∞–∫–∂–µ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ `notFound: true` –æ–∑–Ω–∞—á–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç 404 –¥–∞–∂–µ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞. –≠—Ç–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–ª—É—á–∞–µ–≤ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

- `redirect` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ñ–æ—Ä–º—É `{ destination: string, permanent: boolean }`:

```js
export async function getStaticProps(context) {
  const res = await fetch('/data')
  const data = await res.json()

  if (!data) {
    return {
      redirect: {
        destination: '/',
        permanent: false
      }
    }
  }

  return {
    props: {
      data
    }
  }
}
```

_–ó–∞–º–µ—á–∞–Ω–∏–µ 1_: –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è. –¢–∞–∫–∏–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `next.config.js`.

_–ó–∞–º–µ—á–∞–Ω–∏–µ 2_: –º–æ–¥—É–ª–∏, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `getStaticProps`, –Ω–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Å–±–æ—Ä–∫—É. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥, –≤–∫–ª—é—á–∞—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ø—Ä—è–º–æ –≤ `getStaticProps`.

_–ó–∞–º–µ—á–∞–Ω–∏–µ 3_: `fetch()` –≤ `getStaticProps` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

_–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è_

- –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –±–µ–∑–≥–æ–ª–æ–≤–æ–π (headless) `CMS`
- –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (–Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–∞ (–¥–ª—è `SEO`) –∏ –ø—Ä–∏ —ç—Ç–æ–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–π - `getStaticProps` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `HTML` –∏ `JSON` —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é `CDN`

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `TypeScript`_

```ts
import { GetStaticProps } from 'next'

export const getStaticProps: GetStaticProps = async (context) => {}
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –ø—Ä–æ–ø–æ–≤ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `InferGetStaticPropsType<typeof getStaticProps>`:

```ts
import { InferGetStaticPropsType } from 'next'

type Post = {
  author: string
  content: string
}

export const getStaticProps = async () => {
  const res = await fetch('/posts')
  const posts: Post[] = await res.json()

  return {
    props: {
      posts
    }
  }
}

export default function Blog({ posts }: InferGetStaticPropsType<typeof getStaticProps>) {
  // –ø–æ—Å—Ç—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å —Ç–∏–ø `Post[]`
}
```

__–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è__

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Å–±–æ—Ä–∫–∏ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

–ü—Ä–∏–º–µ—Ä:

```js
const Blog = ({ posts }) => (
  <ul>
    {posts.map((post) => (
      <li>{post.title}</li>
    ))}
  </ul>
)

// –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
// –û–Ω–∞ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–∞–∫ –±–µ—Å—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
// –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
export async function getStaticProps() {
  const res = await fetch('/posts')
  const posts = await res.json()

  return {
    props: {
      posts
    },
    // `Next.js` –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É:
    // - –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    // - –∫–∞–∫ –º–∏–Ω–∏–º—É–º, –æ–¥–∏–Ω —Ä–∞–∑ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    revalidate: 10 // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  }
}

// –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
// –û–Ω–∞ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–∞–∫ –±–µ—Å—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
// –µ—Å–ª–∏ –ø—É—Ç—å –Ω–µ –±—ã–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ
export async function getStaticPaths() {
  const res = await fetch('/posts')
  const posts = await res.json()

  // –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç–∏ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å—Ç–æ–≤
  const paths = posts.map((post) => ({
    params: { id: post.id }
  }))

  // –¢–æ–ª—å–∫–æ —ç—Ç–∏ –ø—É—Ç–∏ –±—É–¥—É—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
  // `{ fallback: 'blocking' }` –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  // –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—É—Ç–∏
  return { paths, fallback: 'blocking' }
}

export default Blog
```

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–∞ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

- –û—Ç–≤–µ—Ç –Ω–∞ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –∫ —Ç–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è 10 —Å–µ–∫—É–Ω–¥ —Ç–∞–∫–∂–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ –∫–µ—à–∞
- –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ 10 —Å–µ–∫—É–Ω–¥ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞–µ—Ç –≤ –æ—Ç–≤–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–µ—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞. –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π

__–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤__

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ –∫ —Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `process.cwd()`:

```js
import { promises as fs } from 'fs'
import { join } from 'path'

const Blog = ({ posts }) => (
  <ul>
    {posts.map((post) => (
      <li key={post.id}>
        <h3>{post.filename}</h3>
        <p>{post.content}</p>
      </li>
    ))}
  </ul>
)

// –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ —á—Ç–æ
// –≤ –Ω–µ–π –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ë–î
export async function getStaticProps() {
  const postsDir = join(process.cwd(), 'posts')
  const filenames = await fs.readdir(postsDir)

  const posts = filenames.map(async (filename) => {
    const filePath = join(postsDir, filename)
    const fileContent = await fs.readFile(filePath, 'utf-8')

    // –û–±—ã—á–Ω–æ, –∑–¥–µ—Å—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞,
    // –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–±–æ—Ä `markdown` –≤ `HTML`

    return {
      filename,
      content: fileContent
    }
  })

  return {
    props: {
      posts: await Promise.all(posts)
    }
  }
}
export default Blog
```

__–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏__

- –ü–æ—Å–∫–æ–ª—å–∫—É `getStaticProps` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏, –æ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (query params) –∏–ª–∏ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ (headers)
- `getStaticProps` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–æ—ç—Ç–æ–º—É –µ–µ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Ä–æ—É—Ç–∞–º
- –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `getStaticProps` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ `HTML`, –Ω–æ –∏ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`. –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `getStaticProps` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–æ–ø–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- `getStaticProps` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ-—Å—Ç—Ä–∞–Ω–∏—Ü–µ. –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏
- –≤ —Ä–µ–∂–∏–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `getStaticProps` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- —Ä–µ–∂–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (preview mode) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

__`getStaticPaths`__

–°—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticPaths`, –±—É–¥—É—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π.

```js
export async function getStaticPaths() {
  return {
    paths: [
      params: {}
    ],
    fallback: true | false | 'blocking'
  }
}
```

_–ö–ª—é—á `paths`_

`paths` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –ø—É—Ç–∏ –±—É–¥—É—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `pages/posts/[id].js`, –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ `getStaticPaths` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–∫–æ–π `paths`:

```js
return {
  paths: [
    { params: { id: '1' } },
    { params: { id: '2' } },
  ]
}
```

–¢–æ–≥–¥–∞ –±—É–¥—É—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã `posts/1` –∏ `posts/2` –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `pages/posts/[id].js`.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ `params` –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

- –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã —è–≤–ª—è–µ—Ç—Å—è `pages/posts/[postId]/[commentId]`, —Ç–æ–≥–¥–∞ `params` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `postId` –∏ `commentId`
- –µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ —Ä–æ—É—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, `pages/[...slug]`, `params` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `slug` –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ç–∞–∫–æ–π –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ `['foo', 'bar']`, —Ç–æ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/foo/bar`
- –µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ —Ä–æ—É—Ç–æ–≤, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `null`, `[]`, `undefined` –∏–ª–∏ `false`, –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ä–æ—É—Ç–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ `slug: false` –∫ `pages/[[...slug]]`, –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/`

_–ö–ª—é—á `fallback`_

- –µ—Å–ª–∏ `fallback` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `false`, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π `404`
- –µ—Å–ª–∏ `fallback` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `true`, –ø–æ–≤–µ–¥–µ–Ω–∏–µ `getStaticProps` –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:
  - –ø—É—Ç–∏ –∏–∑ `getStaticPaths` –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ —Å –ø–æ–º–æ—â—å—é `getStaticProps`
  - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å –Ω–µ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π `404`. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ `HTML` –∏ `JSON`. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—ã–∑–æ–≤ `getStaticProps`
  - –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç `JSON` –¥–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏. –≠—Ç–æ—Ç `JSON` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–ø–∞–º–∏. –°–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∏ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
  - –Ω–æ–≤—ã–π –ø—É—Ç—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `fallback: true` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `next export`.

__–†–µ–∑–µ—Ä–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã__

–í —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

- –ø—Ä–æ–ø—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –ø—É—Å—Ç—ã–º–∏
- –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é —Ä–æ—É—Ç–µ—Ä–∞: `router.isFallback` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `true`

```js
// pages/posts/[id].js
import { useRouter } from 'next/router'

function Post({ post }) {
  const router = useRouter()

  // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –µ—â–µ –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞, –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —ç—Ç–æ
  // –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ `getStaticProps` –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É
  if (router.isFallback) {
    return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  }

  // —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ—Å—Ç–∞
}

export async function getStaticPaths() {
  return {
    paths: [
      { params: { id: '1' } },
      { params: { id: '2' } }
    ],
    fallback: true
  }
}

export async function getStaticProps({ params }) {
  const res = await fetch(`/posts/${params.id}`)
  const post = await res.json()

  return {
    props: {
      post
    },
    revalidate: 1
  }
}

export default Post
```

_–í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω `fallback: true`?_

`fallback: true` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω). –ú—ã —Ö–æ—Ç–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –±—É–¥–µ—Ç –¥–ª–∏—Ç—å—Å—è —Ü–µ–ª—É—é –≤–µ—á–Ω–æ—Å—Ç—å.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º `fallback: true` –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ–∫–∞ `getStaticProps` –¥–µ–ª–∞–µ—Ç —Å–≤–æ–µ –¥–µ–ª–æ), –∑–∞—Ç–µ–º —É–≤–∏–¥–∏—Ç —Å–∞–º—É —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ò –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `fallback: true` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è.

–ï—Å–ª–∏ `fallback` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `blocking`, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –ø—É—Ç—å —Ç–∞–∫–∂–µ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π `404`, –Ω–æ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–µ –±—É–¥–µ—Ç. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –±—Ä–∞—É–∑–µ—Ä—É, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—Ç –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

_–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `getStaticPaths`_

`getStaticPaths` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π.

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `TypeScript`_

```ts
import { GetStaticPaths } from 'next'

export const getStaticPaths: GetStaticPaths = async () => {}
```

_–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏_

- `getStaticPaths` –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `getStaticProps`. –û–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å `getServerSideProps`
- `getStaticPaths` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- `getStaticPaths` –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ-—Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –≤ —Ä–µ–∂–∏–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `getStaticPaths` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

__`getServerSideProps`__

–°—Ç—Ä–∞–Ω–∏—Ü–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getServerSideProps`, –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å –ø–æ–º–æ—â—å—é –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –ø—Ä–æ–ø–æ–≤.

```js
export async function getServerSideProps(context) {
  return {
    props: {}
  }
}
```

`context` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `params`: —Å–º. `getStaticProps`
- `req`: –æ–±—ä–µ–∫—Ç `HTTP IncomingMessage` (–≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∑–∞–ø—Ä–æ—Å)
- `res`: –æ–±—ä–µ–∫—Ç HTTP-–æ—Ç–≤–µ—Ç–∞
- `query`: –æ–±—ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- `preview`: —Å–º. `getStaticProps`
- `previewData`: —Å–º. `getStaticProps`
- `resolveUrl`: –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–≥–æ `URL`, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π —É–¥–∞–ª–µ–Ω –ø—Ä–µ—Ñ–∏–∫—Å `_next/data` –∏ –≤–∫–ª—é—á–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- `locale`: —Å–º. `getStaticProps`
- `locales`: —Å–º. `getStaticProps`
- `defaultLocale`: —Å–º. `getStaticProps`

`getServerSideProps` –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º–∏ –ø–æ–ª—è–º–∏:

- `props` - —Å–º. `getStaticProps`
- `notFound` - —Å–º. `getStaticProps`

```js
export async function getServerSideProps(context) {
  const res = await fetch('/data')
  const data = await res.json()

  if (!data) {
    return {
      notFound: true
    }
  }

  return {
    props: {}
  }
}
```

- `redirect` - —Å–º. `getStaticProps`

```js
export async function getServerSideProps(context) {
  const res = await fetch('/data')
  const data = await res.json()

  if (!data) {
    return {
      redirect: {
        destination: '/',
        permanent: false
      }
    }
  }

  return {
    props: {}
  }
}
```

–î–ª—è `getServerSideProps` —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã —Ç–µ –∂–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —á—Ç–æ –∏ –¥–ª—è `getStaticProps`.

_–°–ª—É—á–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `getServerSideProps`_

`getServerSideProps` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –∑–∞–ø—Ä–æ—Å–∞.

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `TypeScript`_

```ts
import { GetServerSideProps } from 'next'

export const getServerSideProps: GetServerSideProps = async () => {}
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –ø—Ä–æ–ø–æ–≤ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `InferGetServerSidePropsType<typeof getServerSideProps>`:

```ts
import { InferGetServerSidePropsType } from 'next'

type Data = {}

export async function getServerSideProps() {
  const res = await fetch('/data')
  const data = await res.json()

  return {
    props: {
      data
    }
  }
}

function Page({ data }: InferGetServerSidePropsType<typeof getServerSideProps>) {
  // ...
}

export default Page
```

_–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏_

- `getServerSideProps` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- `getServerSideProps` –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ-—Å—Ç—Ä–∞–Ω–∏—Ü–µ

__–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞__

–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–º–µ—é—Ç—Å—è —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ (–ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å `SEO`), —Ç–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ç–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞.

–ö–æ–º–∞–Ω–¥–∞ `Next.js` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∏–º–∏ —Ö—É–∫ [`useSWR`](https://swr.vercel.app/ru), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–∞–∫ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–∞, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ç.–¥.

```js
import useSWR from 'swr'

const fetcher = (url) => fetch(url).then((res) => res.json())

function Profile() {
  const { data, error } = useSWR('/api/user', fetcher)

  if (error) return <div>–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞</div>
  if (!data) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  return <div>–ü—Ä–∏–≤–µ—Ç, {data.name}!</div>
}
```

### –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `CSS`

__–ò–º–ø–æ—Ä—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π__

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É —Å–ª–µ–¥—É–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª `pages/_app.js` (_–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ –Ω–∏–∂–Ω–µ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ):

```js
// pages/_app.js
import './style.css'

// –î–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º
export default function App({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

–¢–∞–∫–∏–µ —Å—Ç–∏–ª–∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ –≤—Å–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –º–æ–≥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ `pages/_app.js`.

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ —Å—Ç–∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –æ–¥–∏–Ω –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CSS-—Ñ–∞–π–ª.

__–ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `node_modules`__

–°—Ç–∏–ª–∏ –º–æ–≥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑ `node_modules`.

–ü—Ä–∏–º–µ—Ä –∏–º–ø–æ—Ä—Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π:

```js
// pages/_app.js
import 'bootstrap/dist/css/bootstrap.min.css'

export default function App({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

–ü—Ä–∏–º–µ—Ä –∏–º–ø–æ—Ä—Ç–∞ —Å—Ç–∏–ª–µ–π –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js
// components/Dialog.js
import { useState } from 'react'
import { Dialog } from '@reach/dialog'
import VisuallyHidden from '@reach/visually-hidden'
import '@reach/dialog/styles.css'

export function MyDialog(props) {
  const [show, setShow] = useState(false)
  const open = () => setShow(true)
  const close = () => setShow(false)

  return (
    <div>
      <button onClick={open} className='btn-open'>–û—Ç–∫—Ä—ã—Ç—å</button>
      <Dialog>
        <button onClick={close} className='btn-close'>
          <VisuallyHidden>–ó–∞–∫—Ä—ã—Ç—å</VisuallyHidden>
          <span>X</span>
        </button>
        <p>–ü—Ä–∏–≤–µ—Ç!</p>
      </Dialog>
    </div>
  )
}
```

__–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞__

`Next.js` –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç [CSS-–º–æ–¥—É–ª–∏](https://github.com/css-modules/css-modules). CSS-–º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ `[name].module.css`. –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∏–ª–µ–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –±–µ–∑ —Ä–∏—Å–∫–∞ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π. CSS-–º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –æ–±—ä–µ–∫—Ç (–æ–±—ã—á–Ω–æ, –∏–º–µ–Ω—É–µ–º—ã–π `styles`), –∫–ª—é—á–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∞—Å—Å–æ–≤.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CSS-–º–æ–¥—É–ª–µ–π:

```css
/* components/Button/Button.module.css */
.danger {
  background-color: red;
  color: white;
}
```

```js
// components/Button/Button.js
import styles from './Button.module.css'

export const Button = () => (
  <button className={styles.danger}>
    –£–¥–∞–ª–∏—Ç—å
  </button>
)
```

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ CSS-–º–æ–¥—É–ª–∏ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É—é—Ç—Å—è –∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ CSS-—Ñ–∞–π–ª—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å—Ç–∏–ª–∏.

__–ü–æ–¥–¥–µ—Ä–∂–∫–∞ `SASS`__

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.scss` –∏ `.sass`. `SASS` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`.module.scss` –∏ `.module.sass`). –î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ `SASS` –≤ `CSS` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [`sass`](https://github.com/sass/sass):

```bash
yarn add sass
```

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ `SASS` –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ñ–∞–π–ª–µ `next.config.js`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```js
const path = require('path')

module.exports = {
  sassOptions: {
    includePaths: [path.join(__dirname, 'styles')]
  }
}
```

__CSS-–≤-JS__

–í `Next.js` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ —Ä–µ—à–µ–Ω–∏–µ `CSS-–≤-JS`. –ü—Ä–æ—Å—Ç–µ–π—à–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Å—Ç–∏–ª–µ–π:

```js
export const Hi = ({ name }) => <p style={{ color: 'green' }}>–ü—Ä–∏–≤–µ—Ç, {name}!</p>
```

`Next.js` —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É [`styled-jsx`](https://github.com/vercel/styled-jsx):

```js
export const Bye = ({ name }) => (
  <div>
    <p>–ü–æ–∫–∞, {name}. –°–∫–æ—Ä–æ —É–≤–∏–¥–∏–º—Å—è!</p>
    <style jsx>{`
      div {
        background-color: #3c3c3c;
      }
      p {
        color: #f0f0f0;
      }
      @media (max-width: 768px) {
        div {
          backround-color: #f0f0f0;
        }
        p {
          color: #3c3c3c;
        }
      }
    `}</style>
    <style global jsx>{`
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
      }
    `}</style>
  </div>
)
```

### –ú–∞–∫–µ—Ç—ã (Layouts)

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ `React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è` –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ú–Ω–æ–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –ø–æ–¥–≤–∞–ª:

```js
// components/layout.js
import Navbar from './navbar'
import Footer from './footer'

export default function Layout({ children }) {
  return (
    <>
      <Navbar />
      <main>{children}</main>
      <Footer />
    </>
  )
}
```

__–ü—Ä–∏–º–µ—Ä—ã__

_–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞–∫–µ—Ç_

–ï—Å–ª–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–∞–∫–µ—Ç, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (custom app) –∏ –æ–±–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –º–∞–∫–µ—Ç. –ü–æ—Å–∫–æ–ª—å–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–º–∞–∫–µ—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü, –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–ø—É—Ç–æ–≤) –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è:

```js
// pages/_app.js
import Layout from '../components/layout'

export default function App({ Component, pageProps }) {
  return (
    <Layout>
      <Component {...pageProps} />
    </Layout>
  )
}
```

_–ú–∞–∫–µ—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü_

–°–≤–æ–π—Å—Ç–≤–æ `getLayout` —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –º–∞–∫–µ—Ç–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–∞–∫–µ—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü. –í–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞–∫–µ—Ç—ã:

```js
// pages/index.js
import Layout from '../components/layout'
import Nested from '../components/nested'

export default function Page() {
  return {
    // ...
  }
}

Page.getLayout = (page) => (
  <Layout>
    <Nested>{page}</Nested>
  </Layout>
)

// pages/_app.js
export default function App({ Component, pageProps }) {
  // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–∫–µ—Ç, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–∞–∫–æ–≤–æ–≥–æ
  const getLayout = Component.getLayout || ((page) => page)

  return getLayout(<Component {...pageProps} />)
}
```

–ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö (–∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–ø—É—Ç–æ–≤, –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ —Ç.–ø.) –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è.

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `TypeScript`_

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `TypeScript` —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ç–∏–ø –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–∫–ª—é—á–∞—é—â–µ–π `getLayout`. –ó–∞—Ç–µ–º —Å–ª–µ–¥—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–ª—è `AppProps`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ `Component` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–Ω–µ–µ —Ç–∏–ø–∞:

```tsx
// pages/index.tsx
import type { ReactElement } from 'react'
import Layout from '../components/layout'
import Nested from '../components/nested'

export default function Page() {
  return {
    // ...
  }
}

Page.getLayout = (page: ReactElement) => (
  <Layout>
    <Nested>{page}</Nested>
  </Layout>
)

// pages/_app.tsx
import type { ReactElement, ReactNode } from 'react'
import type { NextPage } from 'next'
import type { AppProps } from 'next/app'

type NextPageWithLayout = NextPage & {
  getLayout?: (page: ReactElement) => ReactNode
}

type AppPropsWithLayout = AppProps & {
  Component: NextPageWithLayout
}

export default function App({ Component, pageProps }: AppPropsWithLayout) {
  const getLayout = Component.getLayout ?? ((page) => page)

  return getLayout(<Component  {...pageProps} />)
}
```

_–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö_

–î–∞–Ω–Ω—ã–µ –≤ –º–∞–∫–µ—Ç–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é `useEffect` –∏–ª–∏ —É—Ç–∏–ª–∏—Ç –≤—Ä–æ–¥–µ `SWR`. –ü–æ—Å–∫–æ–ª—å–∫—É –º–∞–∫–µ—Ç - —ç—Ç–æ –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –≤ –Ω–µ–º –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getStaticProps` –∏–ª–∏ `getServerSideProps`:

```js
import useSWR from 'swr'
import Navbar from './navbar'
import Footer from './footer'

export default function Layout({ children }) {
  const { data, error } = useSWR('/data', fetcher)

  if (error) return <div>–û—à–∏–±–∫–∞</div>
  if (!data) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  return (
    <>
      <Navbar />
      <main>{children}</main>
      <Footer />
    </>
  )
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Image` –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Image`, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π –∏–∑ `next/image`, —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º HTML-—Ç–µ–≥–∞ `img`, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–µ–±–∞. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π, –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö –¥–æ–±–∏—Ç—å—Å—è —Ö–æ—Ä–æ—à–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π `Core Web Vitals`. –≠—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–µ–µ:

- —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≥–∏–±–∫–æ—Å—Ç–∏ (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏) –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

_–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_

```js
import Image from 'next/image'
import imgSrc from '../public/some-image.png'

export default function Home() {
  return (
    <>
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
      <Image
        src={imgSrc}
        alt=""
        role="presentation"
      />
    </h1>
  )
}
```

_–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à–∏—Ä–∏–Ω—ã –∏ –≤—ã—Å–æ—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```js
import Image from 'next/image'

export default function Home() {
  return (
    <>
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
      <Image
        src="/some-image.png"
        alt=""
        role="presentation"
        width={500}
        height={500}
      />
    </h1>
  )
}
```

_–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è_

`Image` –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –∏ –≤—ã—Å–æ—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

- –≤ —Å–ª—É—á–∞–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) —à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- —à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —è–≤–Ω–æ —Å –ø–æ–º–æ—â—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–ø–æ–≤
- –µ—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–ø `layout` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `fill`

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 3 —Å–ø–æ—Å–æ–±–∞ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –º–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `fill`: —ç—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ä–∞–∑–º–µ—Ä—ã —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `CSS`, –∞ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–π—Å—Ç–≤ `object-fit` –∏ `object-position`
- –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: –µ—Å–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥ –Ω–∞—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º, –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å
- –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—ã–∑–æ–≤–æ–≤ –∫ `API`: –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–æ –∏ –µ–≥–æ —Ä–∞–∑–º–µ—Ä—ã

_–ü—Ä–∞–≤–∏–ª–∞ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π_

- –≤—ã–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –º–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `className` - –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É `img`. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –ø—Ä–æ–ø `style` –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è
- –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="fill"` —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `position: relative`
- –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="responsive"` —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `display: block`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `Image` —Å–º. –Ω–∏–∂–µ.

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤

`Next.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —à—Ä–∏—Ñ—Ç—ã –≤ `CSS` –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:

```js
// –±—ã–ª–æ
<link
  href="https://fonts.googleapis.com/css2?family=Inter"
  rel="stylesheet"
/>

// —Å—Ç–∞–ª–æ
<style data-href="https://fonts.googleapis.com/css2?family=Inter">
  @font-face{font-family:'Inter';font-style:normal...}
</style>
```

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —à—Ä–∏—Ñ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Head`, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π –∏–∑ `next/head`:

```js
// pages/index.js
import Head from 'next/head'

export default function IndexPage() {
  return (
    <div>
      <Head>
        <link
          rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Inter&display=optional"
        />
      </Head>
      <p>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</p>
    </div>
  )
}
```

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —à—Ä–∏—Ñ—Ç–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:

```js
// pages/_document.js
import Document, { Html, Head, Main, NextScript } from 'next/document'

class MyDoc extends Document {
  render() {
    return (
      <Html>
        <Head>
          <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Inter&display=optional"
          />
        </Head>
        <body>
          <Main />
          <NextScript />
        </body>
      </Html>
    )
  }
}
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —à—Ä–∏—Ñ—Ç–æ–≤ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:

```js
// next.config.js
module.exports = {
  optimizeFonts: false
}
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `Head` —Å–º. –Ω–∏–∂–µ.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Script`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Script` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–ø–∞ `strategy`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–Ω–æ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π:

- `beforeInteractive`: –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π. –ö —Ç–∞–∫–∏–º —Å–∫—Ä–∏–ø—Ç–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π. –¢–∞–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è –≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π `HTML` –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–ª—å–Ω—ã–º `JS`
- `afterInteractive`: –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–ª–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π. –ö —Ç–∞–∫–∏–º —Å–∫—Ä–∏–ø—Ç–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Ç–µ–≥–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞. –¢–∞–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
- `lazyOnload`: –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ø–µ—Ä–∏–æ–¥ –ø—Ä–æ—Å—Ç–æ—è. –ö —Ç–∞–∫–∏–º —Å–∫—Ä–∏–ø—Ç–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Ç–æ–≤ –∏ –≤–∏–¥–∂–µ—Ç—ã —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_:

- `Script` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ `afterInteractive` –∏ `lazyOnload`
- –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã, –æ–±–µ—Ä–Ω—É—Ç—ã–µ –≤ `Script`, –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∞—Ç—Ä–∏–±—É—Ç `id` –¥–ª—è –∏—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

__–ü—Ä–∏–º–µ—Ä—ã__

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Script` –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Head` –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

_–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∏—Ñ–∏–ª–æ–≤_

```js
import Script from 'next/script'

export default function Home() {
  return (
    <>
      <Script
        src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserverEntry%2CIntersectionObserver"
        strategy="beforeInteractive"
      />
    </>
  )
}
```

_–û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞_

```js
import Script from 'next/script'

export default function Home() {
  return (
    <>
      <Script
        src="https://connect.facebook.net/en_US/sdk.js"
        strategy="lazyOnload"
      />
    </>
  )
}
```

_–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã_

```js
import { useState } from 'react'
import Script from 'next/script'

export default function Home() {
  const [stripe, setStripe] = useState(null)

  return (
    <>
      <Script
        id="stripe-js"
        src="https://js.stripe.com/v3/"
        onLoad={() => {
          setStripe({ stripe: window.Stripe('pk_test_12345') })
        }}
      />
    </>
  )
}
```

_–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã_

```js
import Script from 'next/script'

<Script id="show-banner" strategy="lazyOnload">
  {`document.getElementById('banner').classList.remove('hidden')`}
</Script>

// –∏–ª–∏
<Script
  id="show-banner"
  dangerouslySetInnerHTML={{
    __html: `document.getElementById('banner').classList.remove('hidden')`
  }}
/>
```

_–ü–µ—Ä–µ–¥–∞—á–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤_

```js
import Script from 'next/script'

export default function Home() {
  return (
    <>
      <Script
        src="https://www.google-analytics.com/analytics.js"
        id="analytics"
        nonce="XUENAJFW"
        data-test="analytics"
      />
    </>
  )
}
```

### –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `public`, –Ω–∞—Ö–æ–¥—è—â–µ–π—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞. –§–∞–π–ª—ã, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `public`, –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –±–∞–∑–æ–≤–æ–π —Å—Å—ã–ª–∫–µ `/`:

```js
import Image from 'next/image'

export default function Avatar() {
  return <Image src="/me.png" alt="me" width="64" height="64" >
}
```

–î–∞–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ç–∞–∫–∂–µ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, –∫–∞–∫ `robots.txt`, `favicon.png`, —Ñ–∞–π–ª–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∞–π—Ç–∞ –ì—É–≥–ª–æ–º –∏ –¥—Ä—É–≥–æ–π —Å—Ç–∞—Ç–∏–∫–∏ (–≤–∫–ª—é—á–∞—è `.html`).

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ (—ç—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –∏ —Ö—É–∫–∞–º). –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ (–Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º).

–î–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `// @refresh reset`.

### `TypeScript`

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `TypeScript` –∏–∑ –∫–æ—Ä–æ–±–∫–∏:

```bash
yarn create next-app --typescript app-name
# –∏–ª–∏
yarn create next-app --ts app-name
```

–î–ª—è `getStaticProps`, `getStaticPaths` –∏ `getServerSideProps` —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã `GetStaticProps`, `GetStaticPaths` –∏ `GetServerSideProps`:

```tsx
import { GetStaticProps, GetStaticPaths, GetServerSideProps } from 'next'

export const getStaticProps: GetStaticProps = async (context) => {
  // ...
}

export const getStaticPaths: GetStaticPaths = async () => {
  // ...
}

export const getServerSideProps: GetServerSideProps = async (context) => {
  // ...
}
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (API Routes):

```ts
import type { NextApiRequest, NextApiResponse } from 'next'

export default (req: NextApiRequest, res: NextApiResponse) => {
  res.status(200).json({ message: '–ü—Ä–∏–≤–µ—Ç!' })
}
```

–ù–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –Ω–∞–º —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –æ—Ç–≤–µ—Ç–µ:

```ts
import type { NextApiRequest, NextApiResponse } from 'next'

type Data = {
  name: string
}

export default (req: NextApiRequest, res: NextApiResponse<Data>) => {
  res.status(200).json({ message: '–ü–æ–∫–∞!' })
}
```

–î–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø `AppProps`:

```tsx
// import App from 'next/app'
import type { AppProps /*, AppContext */ } from 'next/app'

function MyApp({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}

// –î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
// –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
MyApp.getInitialProps = async (context: AppContext) => {
  // –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `getInitialProps`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  // –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç `appProps.pageProps`
  const props = await App.getInitialProps(context)

  return { ...props }
}
```

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `paths` –∏ `baseUrl`, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ –≤ `tsconfig.json`.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è

`Next.js` –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env.local` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- —ç–∫—Å—Ç—Ä–∞–ø–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–º–æ—â—å—é –ø—Ä–µ—Ñ–∏–∫—Å–∞ `NEXT_PUBLIC_`

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–æ–π —Ñ–∞–π–ª `.env.local`:

```bash
DB_HOST=localhost
DB_USER=myuser
DB_PASS=mypassword
```

–≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–µ `process.env.DB_HOST`, `process.env.DB_USER` –∏ `process.env.DB_PASS` –≤ —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `Node.js`, –ø–æ–∑–≤–æ–ª—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –º–µ—Ç–æ–¥–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:

```js
// pages/index.js
export async function getStaticProps() {
  const db = await myDB.connect({
    host: process.env.DB_HOST,
    username: process.env.DB_USER,
    password: process.env.DB_PASS
  })

  // ...
}
```

`Next.js` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤ `.env`:

```bash
HOSTNAME=localhost
PORT=8080
HOST=http://$HOSTNAME:$PORT
```

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä –∫ –Ω–µ–π –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å `NEXT_PUBLIC_`:

```bash
NEXT_PUBLIC_ANALYTICS_ID=abcdefghijk
```

```js
// pages/index.js
import setupAnalyticsService from '../lib/my-analytics-service'

setupAnalyticsService(process.env.NEXT_PUBLIC_ANALYTICS_ID)

function HomePage() {
  return <h1>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</h1>
}

export default HomePage
```

–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ `.env.local` –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã `.env` (–¥–ª—è –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤), `.env.development` (–¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) –∏ `.env.production` (–¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞). _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `.env.local` –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –¥—Ä—É–≥–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### –í–≤–µ–¥–µ–Ω–∏–µ

–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ `Next.js` –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü.

–§–∞–π–ª, –ø–æ–º–µ—â–∞–µ–º—ã–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `pages`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–æ—É—Ç–æ–º.

–§–∞–π–ª—ã `index.js` –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

- `pages/index.js` -> `/`
- `pages/blog/index.js` -> `/blog`

–†–æ—É—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `pages/blog/first-post.js` -> `/blog/first-post`
- `pages/dashboard/settings/username.js` -> `/dashboard/settings/username`

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫:

- `pages/blog/[slug].js` -> `/blog/:slug` (`blog/first-post`)
- `pages/[username]/settings.js` -> `/:username/settings` (`/johnsmith/settings`)
- `pages/post/[...all].js` -> `/post/*` (`/post/2021/id/title`)

__–°–≤—è–∑—å –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏__

–î–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Link`:

```js
import Link from 'next/link'

export default function Home() {
  return (
    <ul>
      <li>
        <Link href="/">
          –ì–ª–∞–≤–Ω–∞—è
        </Link>
      </li>
      <li>
        <Link href="/about">
          –û –Ω–∞—Å
        </Link>
      </li>
      <li>
        <Link href="/blog/first-post">
          –ü–æ—Å—Ç –Ω–æ–º–µ—Ä —Ä–∞–∑
        </Link>
      </li>
    </ul>
  )
}
```

–ó–¥–µ—Å—å:

- `/` ‚Üí `pages/index.js`
- `/about` ‚Üí `pages/about.js`
- `/blog/first-post` ‚Üí `pages/blog/[slug].js`

–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é:

```js
import Link from 'next/link'

export default function Post({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link href={`/blog/${encodeURIComponent(post.slug)}`}>
            {post.title}
          </Link>
        </li>
      ))}
    </ul>
  )
}
```

–ò–ª–∏ –æ–±—ä–µ–∫—Ç `URL`:

```js
import Link from 'next/link'

export default function Post({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link
            href={{
              pathname: '/blog/[slug]',
              query: { slug: post.slug },
            }}
          >
            <a>{post.title}</a>
          </Link>
        </li>
      ))}
    </ul>
  )
}
```

–ó–¥–µ—Å—å:

- `pathname` - —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages` (`/blog/[slug]` –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ)
- `query` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Å–µ–≥–º–µ–Ω—Ç–æ–º (`slug` –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ)

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—ä–µ–∫—Ç—É `router` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ `useRouter` –∏–ª–∏ —É—Ç–∏–ª–∏—Ç—É `withRouter`. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useRouter`.

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—É—Ç–∞ –≤ –ø—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å `[param]`.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/post/[pid].jd`:

```js
import { useRouter } from 'next/router'

export default function Post() {
  const router = useRouter()
  const { pid } = router.query

  return <p>–ü–æ—Å—Ç: {pid}</p>
}
```

–†–æ—É—Ç—ã `/post/1`, `/post/abc` –∏ —Ç.–¥. –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `pages/post/[pid].js`. –°–æ–≤–ø–∞–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞, –æ–±—ä–µ–¥–∏–Ω—è—è—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ä–æ—É—Ç–∞ `/post/abc` –æ–±—ä–µ–∫—Ç `query` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```json
{ "pid": "abc" }
```

–ê –¥–ª—è —Ä–æ—É—Ç–∞ `/post/abc?foo=bar` —Ç–∞–∫:

```json
{ "pid": "abc", "foo": "bar" }
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ—É—Ç–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞, –ø–æ—ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç `query` –¥–ª—è —Ä–æ—É—Ç–∞ `/post/abc?pid=123` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```json
{ "pid": "abc" }
```

–î–ª—è —Ä–æ—É—Ç–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ `query` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∂–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `pages/post/[pid]/[cid].js` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–æ—É—Ç–æ–º `/post/123/456`, –∞ `query` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```json
{ "pid": "123", "cid": "456" }
```

–ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ä–æ—É—Ç–∞–º–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `next/link`:

```js
import Link from 'next/link'

export default function Home() {
  return (
    <ul>
      <li>
        <Link href="/post/abc">
          –í–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/post/[pid].js`
        </Link>
      </li>
      <li>
        <Link href="/post/abc?foo=bar">
          –¢–∞–∫–∂–µ –≤–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/post/[pid].js`
        </Link>
      </li>
      <li>
        <Link href="/post/123/456">
          <a>–í–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/post/[pid]/[cid].js`</a>
        </Link>
      </li>
    </ul>
  )
}
```

__–ü–µ—Ä–µ—Ö–≤–∞—Ç –≤—Å–µ—Ö –ø—É—Ç–µ–π__

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤—Å–µ—Ö –ø—É—Ç–µ–π –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ—Ç–æ—á–∏—è (`...`) –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä `pages/post/[...slug].js` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/post/a`, `/post/a/b`, `/post/a/b/c` –∏ —Ç.–¥.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –≤–º–µ—Å—Ç–æ `slug` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `[...param]`.

–°–æ–≤–ø–∞–≤—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (`slug` –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ) —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, `query` –¥–ª—è `/post/a` –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∞–∫—É—é —Ñ–æ—Ä–º—É:

```json
{ "slug": ["a"] }
```

–ê –¥–ª—è `/post/a/b` —Ç–∞–∫—É—é:

```json
{ "slug": ["a", "b"] }
```

–†–æ—É—Ç—ã –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤—Å–µ—Ö –ø—É—Ç–µ–π –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ - –¥–ª—è —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Ä–Ω—É—Ç—å –µ—â–µ –≤ –æ–¥–Ω–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ (`[[...slug]]`).

–ù–∞–ø—Ä–∏–º–µ—Ä, `pages/post/[[...slug]].js` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/post`, `/post/a`, `/post/a/b` –∏ —Ç.–¥.

–û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∞–º–∏ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–æ–º —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Ä–æ—É—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`/post` –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ).

–ü—Ä–∏–º–µ—Ä—ã –æ–±—ä–µ–∫—Ç–∞ `query`:

```json
{ } // GET `/post` (–ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç)
{ "slug": ["a"] } // `GET /post/a` (–º–∞—Å—Å–∏–≤ —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º)
{ "slug": ["a", "b"] } // `GET /post/a/b` (–º–∞—Å—Å–∏–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏)
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏, –∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ - –Ω–∞–¥ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  - `pages/post/create.js` - –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å `/post/create`
  - `pages/post/[pid].js` - –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å `/post/1`, `/post/abc` –∏ —Ç.–¥., –Ω–æ –Ω–µ —Å `/post/create`
  - `pages/post/[...slug].js` - –±—É–¥—É—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/post/1/2`, `/post/a/b/c` –∏ —Ç.–¥., –Ω–æ –Ω–µ —Å `/post/create` –∏ `/post/abc`
- —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –±—É–¥—É—Ç –≥–∏–¥—Ä–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–æ—É—Ç–æ–≤, —Ç.–µ. `query` –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º (`{}`). –ü–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è `query`

### –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Link` –∏–∑ `next/link`. –û–¥–Ω–∞–∫–æ, –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Ä–æ—É—Ç–µ—Ä –∏–∑ `next/router`:

```js
import { useRouter } from 'next/router'

export default function ReadMore() {
  const router = useRouter()

  return (
    <button onClick={() => router.push('/about')}>
      –ß–∏—Ç–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ
    </button>
  )
}
```

### –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è (—Ç–∏—Ö–∞—è) –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (Shallow Routing)

–¢–∏—Ö–∏–π —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å `URL` –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ `getServerSideProps` –∏ `getStaticProps`.

–ú—ã –ø–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ `pathname` –∏ `query` —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç `router` (–ø–æ–ª—É—á–∞–µ–º—ã–π —Å –ø–æ–º–æ—â—å—é `useRouter()` –∏–ª–∏ `withRouter()`) –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–∏—Ö–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `{ shallow: true }`:

```js
import { useEffect } from 'react'
import { useRouter } from 'next/router'

// —Ç–µ–∫—É—â–∏–π `URL` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `/`
export default function Page() {
  const router = useRouter()

  useEffect(() => {
    // –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
    router.push('?counter=1', undefined, { shallow: true })
  }, [])

  useEffect(() => {
    // –∑–Ω–∞—á–µ–Ω–∏–µ `counter` –∏–∑–º–µ–Ω–∏–ª–æ—Å—å!
  }, [router.query.counter])
}
```

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ `URL` –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ—É—Ç–∞.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —Ç–∏—Ö–∏–π —Ä–æ—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `pages/about.js` –∏ –º—ã –≤—ã–ø–æ–ª–Ω—è–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

```js
router.push('?counter=1', '/about?counter=1', { shallow: true })
```

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è, –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è (–Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `{ shallow: true }`).

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (API Routes)

### –í–≤–µ–¥–µ–Ω–∏–µ

–õ—é–±–æ–π —Ñ–∞–π–ª, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages/api`, –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ `/api/*` –∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–æ–π (endpoint) `API`, –∞ –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π. –ö–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–∑–º–µ—Ä –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å–±–æ—Ä–∫–∏.

–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —Ä–æ—É—Ç–∞ `pages/api/user.js` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ `200` –∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`:

```js
export default function handler(req, res) {
  res.status(200).json({ name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤' })
}
```

–§—É–Ω–∫—Ü–∏—è `handler` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

- `req` - —ç–∫–∑–µ–º–ø–ª—è—Ä `http.IncomingMessage` + –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ (—Å–º. –Ω–∏–∂–µ)
- `res` - —ç–∫–∑–µ–º–ø–ª—è—Ä `http.ServerResponse` + –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Å–º. –Ω–∏–∂–µ)

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `req.method`:

```js
export default function handler(req, res) {
  if (req.method === 'POST') {
    // —Ä–∞–±–æ—Ç–∞–µ–º —Å POST-–∑–∞–ø—Ä–æ—Å–æ–º
  } else {
    // —Ä–∞–±–æ—Ç–∞–µ–º —Å –¥—Ä—É–≥–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
  }
}
```

__–°–ª—É—á–∞–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è__

–í –Ω–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ –≤–µ—Å—å `API` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `API` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å. –î—Ä—É–≥–∏–µ —Å–ª—É—á–∞–∏:

- –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ `URL` –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º

__–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏__

- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç CORS-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ (—Å–º. –Ω–∏–∂–µ)
- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å `next export`

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ —Ä–æ—É—Ç–∞—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, —Ç–æ –æ–Ω–∏ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏ —Ä–æ—É—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü.

### –ü–æ—Å—Ä–µ–¥–Ω–∏–∫–∏ (Middlewares)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—â–∏—Ö –≤—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å (`req`):

- `req.cookies` - –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫—É–∫–∏, –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å (–∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `{}`)
- `req.query` - –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `{}`)
- `req.body` - –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Content-Type`, –∏–ª–∏ `null`

__–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤__

–ö–∞–∂–¥—ã–π —Ä–æ—É—Ç –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç `config` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤:

```js
export const config = {
  api: {
    bodyParser: {
      sizeLimit: '1mb'
    }
  }
}
```

- `bodyParser: false` - –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—ã—Ä–æ–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö - `Stream`)
- `bodyParser.sizeLimit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –ª—é–±–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º [`bytes`](https://github.com/visionmedia/bytes.js)
- `externalResolver: true` - —Å–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É, —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Ä–æ—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–º, —Ç–∞–∫–∏–º –∫–∞–∫ `express` –∏–ª–∏ `connect`

__–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤__

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ [`cors`](https://www.npmjs.com/package/cors).

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–æ–¥—É–ª—å:

```bash
yarn add cors
```

–î–æ–±–∞–≤–ª—è–µ–º `cors` –≤ —Ä–æ—É—Ç:

```js
import Cors from 'cors'

// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞
const cors = Cors({
  methods: ['GET', 'HEAD']
})

// –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞
// –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥—Ä—É–≥–æ–≥–æ –∫–æ–¥–∞
// –∏–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–µ
const runMiddleware = (req, res, next) =>
  new Promise((resolve, reject) => {
    fn(req, res, (result) =>
      result instanceof Error ? reject(result) : resolve(result)
    )
  })

export default async function handler(req, res) {
  // –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞
  await runMiddleware(req, res, cors)

  // –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ `API`
  res.json({ message: '–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç!' })
}
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–û–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ (`res`) –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –æ–ø—ã—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫.

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–µ–µ:

- `res.status(code)` - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞
- `res.json(body)` - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`, `body` - –ª—é–±–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç
- `res.send(body)` - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞, `body` - `string`, `object` –∏–ª–∏ `Buffer`
- `res.redirect([status,] path)` - –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, `status` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `307` (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É

- –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–º. –Ω–∏–∂–µ) –≤–µ–∑–¥–µ, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ
- —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Ç–æ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã) –≤ –æ–¥–Ω–æ–º —Ä–µ–≥–∏–æ–Ω–µ
- –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ `JavaScript-–∫–æ–¥–∞`
- –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É "—Ç—è–∂–µ–ª–æ–≥–æ" `JS` –¥–æ –º–æ–º–µ–Ω—Ç–∞ –µ–≥–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫
- –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `500` (–æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞) –∏ `404` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç –ª—É—á—à–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –∑–∞–ø—É—Å—Ç–∏—Ç–µ `Lighthouse` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –ø–æ–∏—Å–∫–æ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É –∏ —Ä–µ–∂–∏–º "–ò–Ω–∫–æ–≥–Ω–∏—Ç–æ" –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã –Ω–∏—á—Ç–æ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –Ω–µ –≤–ª–∏—è–ª–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ñ–∏—á–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
- –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:
  - `next/image` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —à—Ä–∏—Ñ—Ç–æ–≤
  - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Å–∫—Ä–∏–ø—Ç–æ–≤

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º. `Next.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∫ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º, –¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–º –∏–∑ `_next/static`, –≤–∫–ª—é—á–∞—è `JS`, `CSS`, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –º–µ–¥–∏–∞.

```bash
Cache-Control: public, max-age=31536000, immutable
```

–î–ª—è —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–µ—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–∞ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–∑–º–µ—Ç–∫—É, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `revalidate` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `getStaticProps`.

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é `next dev` –æ—Ç–∫–ª—é—á–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

```bash
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
```

–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `getServerSideProps` –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `stale-while-revalidate`:

```js
// –ó–Ω–∞—á–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫ (s-maxage=10).
// –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫, –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
// —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–≤–µ–∂–∏–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 59 —Å–µ–∫,
// –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
// (stale-while-revalidate=59)
// –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –∫–µ—à –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
// –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
export async function getServerSideProps({ req, res }) {
  res.setHeader(
    'Cache-Control',
    'public, s-maxage=10, stale-while-revalidate=59'
  )

  return {
    props: {}
  }
}
```

### –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ `JavaScript`

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π `JS-–±–∞–Ω–¥–ª` –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:

- [`Import Cost`](https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost) - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è `VSCode`, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–µ–µ —Ä–∞–∑–º–µ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø–∞–∫–µ—Ç–∞
- [`Package Phobia`](https://packagephobia.com/) - —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "—Å—Ç–æ–∏–º–æ—Å—Ç–∏" –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç –Ω–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (dev dependency)
- [`Bundle Phobia`](https://bundlephobia.com/) - —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á–∏—Ç —Ä–∞–∑–º–µ—Ä —Å–±–æ—Ä–∫–∏
- [`Webpack Bundle Analyzer`](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer) - `Webpack-–ø–ª–∞–≥–∏–Ω` –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –≤ –≤–∏–¥–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages` –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã `next build`. –î–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç.

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Authentication)

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, –∫–µ–º —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –µ–≥–æ –ø–æ–ª–Ω–æ–º–æ—á–∏–π, —Ç.–µ. —Ç–æ–≥–æ, –∫ —á–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø. `Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ü–∞—Ç—Ç–µ—Ä–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –î–∞–ª–µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é. –û—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–≤–∞:

- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
- –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ "–≤—Å–ø—ã—à–∫–∏" (flush) –Ω–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏–º–µ–µ—Ç—Å—è –≤–≤–∏–¥—É –≤–∏–¥–∏–º–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

__–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏__

`Next.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π, –µ—Å–ª–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `getServerSideProps`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –∞ –∑–∞—Ç–µ–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–û–¥–Ω–∏–º –∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `CDN` –∏ –∏—Ö –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –ø–æ–º–æ—â—å—é `next/link`. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É–º–µ–Ω—å—à–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (Time to Interactive, TTI).

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–Ω–∞—á–∞–ª–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —à–∞–±–ª–æ–Ω (—Å–∫–µ–ª–µ—Ç), –∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ:

```js
// pages/profile.js
import useUser from '../lib/useUser'
import Layout from './components/Layout'

export default function Profile() {
  // –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
  const { user } = useUser({ redirectTo: '/login' })

  // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
  if (!user || user.isLoggedIn === false) {
    return <Layout>–ó–∞–≥—Ä—É–∑–∫–∞...</Layout>
  }

  // –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  return (
    <Layout>
      <h1>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h1>
      <pre>{JSON.stringify(user, null, 2)}</pre>
    </Layout>
  )
}
```

__–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞__

–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–º–µ–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getServerSideProps`, `Next.js` –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–∞–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –∏–∑ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

```js
export async function getServerSideProps(context) {
  return {
    props: {} // –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞–∫ –ø—Ä–æ–ø—ã
  }
}
```

–ü–µ—Ä–µ–ø–∏—à–µ–º –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–µ—Å—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Profile` –ø–æ–ª—É—á–∏—Ç –ø—Ä–æ–ø `user`. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —à–∞–±–ª–æ–Ω–∞:

```js
// pages/profile.js
import withSession from '../lib/session'
import Layout from '../components/Layout'

export const getServerSideProps = withSession(async (req, res) => {
  const user = req.session.get('user')

  if (!user) {
    return {
      redirect: {
        destination: '/login',
        permanent: false
      }
    }
  }

  return {
    props: {
      user
    }
  }
})

export default function Profile({ user }) {
  // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
  return (
    <Layout>
      <h1>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h1>
      <pre>{JSON.stringify(user, null, 2)}</pre>
    </Layout>
  )
}
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤—Å–ø—ã—à–∫–∏ –Ω–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `getServerSideProps` –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞. –ü–æ—ç—Ç–æ–º—É –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞ (Time to Fist Byte, TTFB), —Å–ª–µ–¥—É–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ö–æ—Ä–æ—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å –∏–º–µ–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ—à–µ–Ω–∏–π:

- [`next-iron-session`](https://github.com/vercel/next.js/tree/canary/examples/with-iron-session) - –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [`next-auth`](https://github.com/nextauthjs/next-auth-example) - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (Google, Facebook, GitHub –∏ —Ç.–¥.), JWT, JWE, email/–ø–∞—Ä–æ–ª—å, –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –¥—Ä.

–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Å—Ç–∞—Ä—ã–π-–¥–æ–±—Ä—ã–π [`passport`](http://www.passportjs.org/):

- [`with-passport`](https://github.com/vercel/next.js/tree/canary/examples/with-passport)
- [`with-passport-and-next-connect`](https://github.com/vercel/next.js/tree/canary/examples/with-passport-and-next-connect)

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π `import`. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–æ–¥—É–ª–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ —Ç–∞–∫–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `SSR`.

–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –Ω–µ—Ç–æ—á–Ω—ã–π (fuzzy) –ø–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é [`fuse.js`](https://fusejs.io/), –∑–∞–≥—Ä—É–∂–∞—è —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–ª–µ –¥–ª—è –ø–æ–∏—Å–∫–∞:

```js
import { useState } from 'react'

const names = ['John', 'Jane', 'Alice', 'Bob', 'Harry']

export default function Page() {
  const [results, setResults] = useState([])

  return (
    <div>
      <input
        type="text"
        placeholder="–ü–æ–∏—Å–∫"
        onChange={async ({ currentTarget: { value } }) => {
          // –∑–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
          const Fuse = (await import('fuse.js')).default
          const fuse = new Fuse(names)

          setResults(fuse.search(value))
        }}
      />
      <pre>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞: {JSON.stringify(results, null, 2)}</pre>
    </div>
  )
}
```

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç - —ç—Ç–æ —Å–ø–æ—Å–æ–± —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ —á–∞—Å—Ç–∏ (code splitting), –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—Ç –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ `React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `next/dynamic`.

__–û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ__

–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å `../components/Hello`:

```js
import dynamic from 'next/dynamic'
import Header from '../components/Header'

const DynamicHello = dynamic(() => import('../components/Hello'))

export default function Home() {
  return (
    <div>
      <Header />
      <DynamicHello />
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    </div>
  )
}
```

__–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞__

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Ç–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

```js
// components/Hello.js
export const Hello = () => <p>–ü—Ä–∏–≤–µ—Ç!</p>
```

–î–ª—è –µ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å –∏–∑ `Promise`, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ `import`:

```js
import dynamic from 'next/dynamic'
import Header from '../components/Header'

const DynamicHello = dynamic(() =>
  import('../components/Hello')
    .then((module) => module.Hello)
)

export default function Home() {
  return (
    <div>
      <Header />
      <DynamicHello />
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    </div>
  )
}
```

__–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏__

–î–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É `loading`:

```js
import dynamic from 'next/dynamic'
import Header from '../components/Header'

const DynamicHelloWithCustomLoading = dynamic(
  () => import('../components/Hello'),
  { loading: () => <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p> }
)

export default function Home() {
  return (
    <div>
      <Header />
      <DynamicHelloWithCustomLoading />
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    </div>
  )
}
```

__–û—Ç–∫–ª—é—á–µ–Ω–∏–µ `SSR`__

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É `ssr`:

```js
import dynamic from 'next/dynamic'
import Header from '../components/Header'

const DynamicHelloWithNoSSR = dynamic(
  () => import('../components/Hello'),
  { ssr: false }
)

export default function Home() {
  return (
    <div>
      <Header />
      <DynamicHelloWithNoSSR />
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    </div>
  )
}
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `suspense` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ª–µ–Ω–∏–≤–æ –ø–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–æ—á–µ—Ç–∞–Ω–∏–µ `React.lazy` –∏ `<Suspense>`. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_, —á—Ç–æ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å `fallback`. –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `SSR` –≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```js
import dynamic from 'next/dynamic'
import Header from '../components/Header'

const DynamicLazyHello = dynamic(() => import('../components/Hello'), { suspense: true })

export default function Home() {
  return (
    <div>
      <Header />
      <DynamicLazyHello />
      <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>
    </div>
  )
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç `getServerSideProps`, `Next.js` –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞).

–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, `Next.js` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–∑–º–µ—Ç–∫—É.

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ–±—ä–µ–∫—Ç —Ä–æ—É—Ç–µ—Ä–∞ `query` –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º. –ü–æ—Å–ª–µ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ `Next.js` –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è `query` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

`next build` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML-—Ñ–∞–π–ª—ã –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –¥–ª—è `pages/about.js` –±—É–¥–µ—Ç:

```bash
.next/server/pages/about.html
```

–ê –µ—Å–ª–∏ –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ–±–∞–≤–∏—Ç—å `getServerSideProps`, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:

```bash
.next/server/pages/about.js
```

__–ó–∞–º–µ—Ç–∫–∏__

- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `App` –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `Document` —Å `getInitialProps` —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ `ctx.req` –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. –î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ, `ctx.req` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `undefined`

### –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏

`next export` –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π `HTML`. –¢–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞.

–¢–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ—á—Ç–∏ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–µ `Next.js`, –≤–∫–ª—é—á–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç.

`next export` —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ —Å—á–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –≤ `HTML`. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–æ—É—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getStaticPaths`, —á—Ç–æ–±—ã `Next.js` –º–æ–≥ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ª–µ–¥—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–∞.

`next export` —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±–µ–∑ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –¢–∞–∫–∏–µ —Ñ–∏—á–∏, –∫–∞–∫ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `next export` –±—É–¥—É—Ç –æ—Ç–∫–ª—é—á–µ–Ω—ã.

–î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç–∏–∫—É –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```bash
next build && next export
```

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `out`.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `next export` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. HTML-—Ñ–∞–π–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages`. –î–ª—è –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `exportPathMap` –≤ `next.config.js` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü.

__–ó–∞–º–µ—Ç–∫–∏__

- —Å –ø–æ–º–æ—â—å—é `next export` –º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML-–≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `getStaticProps`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –≤–∏–¥–µ –ø—Ä–æ–ø–æ–≤. –í–º–µ—Å—Ç–æ `getStaticProps` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `getInitialProps`, –Ω–æ —ç—Ç–æ –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- —Ä–µ–∂–∏–º `fallback: true` –≤ `getStaticProps` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- `getServerSideProps` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Image` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `loader` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è)

### –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∏ —Å–∏–Ω–æ–Ω–∏–º—ã –ø—É—Ç–µ–π –º–æ–¥—É–ª–µ–π

`Next.js` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `baseUrl` –∏ `paths` –≤ —Ñ–∞–π–ª–∞—Ö `tsconfig.json` –∏ `jsconfig.json`.

`baseUrl` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–ü—Ä–∏–º–µ—Ä:

```json
// `tsconfig.json` –∏–ª–∏ `jsconfig.json`
{
  "compilerOptions": {
    "baseUrl": "."
  }
}
```

```js
// components/button.js
export const Button = () => <button>Click Me</button>

// pages/index.js
import { Button } from 'components/button'

export default function Index() {
  return (
    <>
      <h1>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</h1>
      <Button />
    </>
  )
}
```

`paths` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è –ø—É—Ç–µ–π –º–æ–¥—É–ª–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä:

```json
// `tsconfig.json` –∏–ª–∏ `jsconfig.json`
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["components/*"]
    }
  }
}
```

```js
// components/button.js
export const Button = () => <button>Click Me</button>

// pages/index.js
import { Button } from '@/button'

export default function Index() {
  return (
    <>
      <h1>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</h1>
      <Button />
    </>
  )
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

–ü—Ä–∏–º–µ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:

```js
// server.js
const { createServer } = require('http')
const { parse } = require('url')
const next = require('next')

const dev = process.env.NODE_ENV !== 'production'
const app = next({ dev })
const handle = app.getRequestHandler()

app.prepare().then(() => {
  createServer((req, res) => {
    // `true` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
    const parseUrl = parse(req.url, true)
    const { pathname, query } = parseUrl

    switch (pathname) {
      case '/a':
        return app.render(req, res, '/a', query)
      case '/b':
        return app.render(req, res, '/b', query)
      default:
        handle(req, res, parsedUrl)
    }
  }).listen(3000, (err) => {
    if (err) throw err
    console.log('–ó–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000')
  })
})
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª `scripts` –≤ —Ñ–∞–π–ª–µ `package.json` —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```json
"scripts": {
  "dev": "node server.js",
  "build": "next build",
  "start": "NODE_ENV=production node server.js"
}
```

–ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–∫–æ–π –∏–º–ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ `Next.js-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é`:

```js
const next = require('next')
const app = next({})
```

`next` - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

- `dev: boolean` - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `dir: string` - –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `.`)
- `quiet: boolean` - –µ—Å–ª–∏ `true`, –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)
- `conf: object` - —Ç–∞–∫–æ–π –∂–µ –æ–±—ä–µ–∫—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `next.config.js`

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ `app` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Next.js` –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages` –ø–æ –ø—É—Ç–∏, —Å–æ–≤–ø–∞–¥–∞—é—â–µ–º—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—é –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—É—Ç–µ–π.

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ —Ñ–∞–π–ª–∞—Ö –≤ `pages`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `useFileSystemPublicRoutes` –≤ `next.config.js`:

```js
module.exports = {
  useFileSystemPublicRoutes: false
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: —ç—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º —Ñ–∞–π–ª–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è `SSR`. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –ø—É—Ç—è–º.

### –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

`Next.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `App` –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü. –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

- —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–∞–∫–µ—Ç (layout) –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å –ø–æ–º–æ—â—å—é `componentDidCatch`
- –≤–Ω–µ–¥—Ä—è—Ç—å –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –¥–æ–±–∞–≤–ª—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏

–î–ª—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ `App` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `pages/_app.js` —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

```js
// pages/_app.js
import App from 'next/app'

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}

MyApp.getInitialProps = async (appContext) => {
  const appProps = await App.getInitialProps(appContext)

  return { ...appProps }
}

export default MyApp
```

–ü—Ä–æ–ø `Component` - —ç—Ç–æ –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞. `pageProps` - —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–ø–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ–≥–æ –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º.

__–ó–∞–º–µ—Ç–∫–∏__

- –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `App` (—Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ `pages/_app.js`) –ø—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `getInitialProps` –≤ `App` –æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü –±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ `getInitialProps` –≤ –∫–∞—Å—Ç–æ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç `import App from 'next/app'`, –≤—ã–∑–≤–∞—Ç—å `App.getInitialProps(appContext)` –≤–Ω—É—Ç—Ä–∏ `getInitialProps` –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
- –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è `App` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ `getStaticProps` –∏–ª–∏ `getServerSideProps`

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫

`Next.js` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ—à–∏–±–æ–∫ `404` –∏ `500`. –î–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–π–ª—ã `pages/404.js` –∏ `pages/500.js`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ:

```js
// pages/404.js
export default function Custom404() {
  return <h1>404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>
}

// pages/500.js
export default function Custom500() {
  return <h1>500 - –û—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</h1>
}
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –Ω–∞ —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `getStaticProps`.

–û—à–∏–±–∫–∏ 500 –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, —Ç–∞–∫ –∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `Error`. –î–ª—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `pages/_error.js` –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–µ–≥–æ –∫–æ–¥ –≤—Ä–æ–¥–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ:

```js
export default function Error({ statusCode }) {
  return (
    <p>
      {statusCode
        ? `–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ ${statusCode}`
        : `–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ`}
    </p>
  )
}

Error.getInitialProps = ({ res, err }) => {
  const statusCode = res ? res.statusCode : err ? err.statusCode : 404
  return { statusCode }
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `pages/_error.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ. –í —Ä–µ–∂–∏–º–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç–µ–∫–æ–º –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–∞ –µ–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è.

–î–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–∫–∏ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Error`:

```js
import Error from 'next/error'

export async function getServerSideProps() {
  const res = await fetch('https://api.github.com/repos/harryheman/react-total')
  const errorCode = res.ok ? false : res.statusCode
  const data = await res.json()

  return {
    props: {
      errorCode,
      stars: data.stergazers_count
    }
  }
}

export default function Page({ errorCode, stars }) {
  if (errorCode) {
    return <Error statusCode={errorCode} />
  }

  return <div>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥: {stars}</div>
}
```

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Error` —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–ø `title` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—É.

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src`

–°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/pages` –≤–º–µ—Å—Ç–æ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages`.

__–ó–∞–º–µ—Ç–∫–∏__

- `src/pages` –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `pages`
- —Ñ–∞–π–ª—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `next.config.js` –∏ `tsconfig.json` –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞. –¢–æ–∂–µ —Å–∞–º–æ–µ –∫–∞—Å–∞–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `public`

### –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)

`Next.js` –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª–µ–π, –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –ª–æ–∫–∞–ª—å –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –¥–æ–º–µ–Ω—É –ª–æ–∫–∞–ª–∏.

–ü–æ–¥–¥–µ—Ä–∂–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ `i18n` –æ–∑–Ω–∞—á–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ç–∞–∫–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏, –∫–∞–∫ `react-intl`, `react-i18next`, `lingui`, `rosetta`, `next-intl` –∏ –¥—Ä.

__–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã__

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `i18n` –≤ —Ñ–∞–π–ª–µ `next.config.js`. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞–ª–∏ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `—è–∑—ã–∫-—Ä–µ–≥–∏–æ–Ω-—Å–∫—Ä–∏–ø—Ç`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- `en-US` - –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- `nl-NL` - –Ω–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–π (–≥–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π)
- `nl` - –Ω–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–π –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏–æ–Ω–∞

```js
// next.config.js
module.exports = {
  i18n: {
    // –õ–æ–∫–∞–ª–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
    locales: ['en-US', 'fr', 'nl-NL'],
    // –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –ª–æ–∫–∞–ª—å, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
    // –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—É—Ç–∏ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞,
    // –Ω–∞–ø—Ä–∏–º–µ—Ä, `/hello`
    defaultLocale: 'en-US',
    // –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –Ω–∏–º –ª–æ–∫–∞–ª–µ–π
    // (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–º–µ–Ω–æ–≤)
    // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –ø–æ–¥–¥–æ–º–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞,
    // –Ω–∞–ø—Ä–∏–º–µ—Ä, `fr.example.com`
    domains: [
      {
        domain: 'example.com',
        defaultLocale: 'en-US'
      },
      {
        domain: 'example.nl',
        defaultLocale: 'nl-NL'
      },
      {
        domain: 'example.fr',
        defaultLocale: 'fr',
        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ `http` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        // –ª–æ–∫–∞–ª–∏, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–π –∫ –¥–æ–º–µ–Ω—É (—Ç.–µ. –ø–æ `http` –≤–º–µ—Å—Ç–æ `https`)
        http: true
      }
    ]
  }
}
```

__–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏__

–°—É—â–µ—Å—Ç–≤—É–µ—Ç 2 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏: –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É–±–ø—É—Ç–µ–π (subpaths) –∏ —Ä–æ—É—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–º–µ–Ω–æ–≤.

_–†–æ—É—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É–±–ø—É—Ç–µ–π_

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ª–æ–∫–∞–ª—å –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ `url`:

```js
// next.config.js
module.exports = {
  i18n: {
    locales: ['en-US', 'fr', 'nl-NL'],
    defaultLocale: 'en-US'
  }
}
```

–ó–¥–µ—Å—å `en-US`, `fr` –∏ `nl-NL` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞, –∞ `en-US` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `pages/blog` –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ `url`:

- `/blog`
- `/fr/blog`
- `/nl-nl/blog`

–î–µ—Ñ–æ–ª—Ç–Ω–∞—è –ª–æ–∫–∞–ª—å –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞.

_–†–æ—É—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–º–µ–Ω–æ–≤_

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ª–æ–∫–∞–ª–∏ –±—É–¥—É—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏:

```js
// next.config.js
module.exports = {
  i18n: {
    locales: ['en-US', 'fr', 'nl-NL', 'nl-BE'],
    defaultLocale: 'en-US',

    domains: [
      {
        domain: 'example.com',
        defaultLocale: 'en-US',
      },
      {
        domain: 'example.fr',
        defaultLocale: 'fr',
      },
      {
        domain: 'example.nl',
        defaultLocale: 'nl-NL',
        // –°–ø–∏—Å–æ–∫ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª–µ–π –±—É–¥–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –¥–æ–º–µ–Ω–æ–º
        locales: ['nl-BE']
      }
    ]
  }
}
```

–î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `pages/blog` –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ `url`:

- `example.com/blog`
- `example.fr/blog`
- `example.nl/blog`
- `example.nl/nl-BE/blog`

__–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏__

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, `Next.js` –ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ –ª–æ–∫–∞–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Accept-Language` –∏ —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ª–æ–∫–∞–ª–∏, –æ—Ç–ª–∏—á–∞—é—â–µ–π—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

–ï—Å–ª–∏ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ `example.com` –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept-Language: fr;q=0.9`, –≤ —Å–ª—É—á–∞–µ —Ä–æ—É—Ç–∏–Ω–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `example.fr`, –∞ –≤ —Å–ª—É—á–∞–µ —Ä–æ—É—Ç–∏–Ω–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É–±–ø—É—Ç–µ–π - –Ω–∞ `/fr`.

__–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏__

```js
// next.config.js
module.exports = {
  i18n: {
    localeDetection: false
  }
}
```

__–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–æ–∫–∞–ª–∏__

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–∫–∞–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ —Ä–æ—É—Ç–µ—Ä–µ, –¥–æ—Å—Ç—É–ø –∫ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Ö—É–∫–∞ `useRouter`. –î–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- `locale` - —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å
- `locales` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ª–æ–∫–∞–ª–∏
- `defaultLocale` - –ª–æ–∫–∞–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–í —Å–ª—É—á–∞–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –ø–æ–º–æ—â—å—é `getStaticProps` –∏–ª–∏ `getServerSideProps` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–∫–∞–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º —Ñ—É–Ω–∫—Ü–∏–∏.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `getStaticPaths` –ª–æ–∫–∞–ª–∏ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `context`, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º —Ñ—É–Ω–∫—Ü–∏–∏, –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö `locales` –∏ `defaultLocale`.

__–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—è–º–∏__

–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –ª–æ–∫–∞–ª—è–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `next/link` –∏–ª–∏ `next/router`.

–î–ª—è `next/link` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –ø—Ä–æ–ø `locale` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ª–æ–∫–∞–ª—å. –ï—Å–ª–∏ —Ç–∞–∫–æ–π –ø—Ä–æ–ø –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å:

```js
import Link from 'next/link'

export default function IndexPage(props) {
  return (
    <Link href="/another" locale="fr">
      <a>–ü–µ—Ä–µ–π—Ç–∏ –∫ `/fr/another`</a>
    </Link>
  )
}
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `next/router` –ª–æ–∫–∞–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:

```js
import { useRouter } from 'next/router'

export default function IndexPage(props) {
  const router = useRouter()

  return (
    <div
      onClick={() => {
        router.push('/another', '/another', { locale: 'fr' })
      }}
    >
      –ü–µ—Ä–µ–π—Ç–∏ –∫ `/fr/another`
    </div>
  )
}
```

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ö—Ä–∞–Ω—è—â–µ–π—Å—è –≤ —Ä–æ—É—Ç–µ—Ä–µ, —Ç–∞–∫–æ–π —Ç–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∫—Ä—ã—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–ø–∞ `href` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç:

```js
import { useRouter } from 'next/router'
const router = useRouter()
const { pathname, asPath, query } = router
// –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ª–æ–∫–∞–ª—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥—Ä—É–≥–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
router.push({ pathname, query }, asPath, { locale: nextLocale })
```

–ï—Å–ª–∏ `href` –≤–∫–ª—é—á–∞–µ—Ç –ª–æ–∫–∞–ª—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:

```js
import Link from 'next/link'

export default function IndexPage(props) {
  return (
    <Link href="/fr/another" locale={false}>
      <a>–ü–µ—Ä–µ–π—Ç–∏ –∫ `/fr/another`</a>
    </Link>
  )
}
```

__–ó–∞–º–µ—Ç–∫–∏__

- `Next.js` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Accept-Language` —Å –ø–æ–º–æ—â—å—é –∫—É–∫–∏ `NEXT_LOCALE=–ª–æ–∫–∞–ª—å`. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç–∞–∫–æ–π –∫—É–∫–∏, `Accept-Language` –±—É–¥–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è.
- `Next.js` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∞—Ç—Ä–∏–±—É—Ç `lang` –∫ —Ç–µ–≥—É `html`. –û–¥–Ω–∞–∫–æ, –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–æ—ç—Ç–æ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞-—Ç–µ–≥–∞ `hreflang` - –∑–∞–¥–∞—á–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (—ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `next/head`).

__–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è__

_–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã –∏ `getStaticProps`_

–î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é `getStaticProps`, –≤—Å–µ –ª–æ–∫–∞–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã, –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∏–∑ `getStaticPaths`. –í–º–µ—Å—Ç–µ —Å –æ–±—ä–µ–∫—Ç–æ–º `params` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–µ `locale`, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–µ –ª–æ–∫–∞–ª—å –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:

```js
// pages/blog/[slug].js
export const getStaticPaths = ({ locales }) => {
  return {
    paths: [
      // –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `locale` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      { params: { slug: 'post-1' }, locale: 'en-US' },
      { params: { slug: 'post-1' }, locale: 'fr' },
    ],
    fallback: true
  }
}
```

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –Ω–µ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å `getStaticProps`, –¥–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –≠—Ç–æ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª–µ–π, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤ `getStaticProps`.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º `fallback`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–∑ `getStaticPaths` —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—É—Ç–∏ –∏ –ª–æ–∫–∞–ª–∏ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É.

–ï—Å–ª–∏ –∏–∑ `getStaticProps` –Ω–µ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–µ—Ä–Ω—É—Ç—å `notFound: true`, —Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –Ω–µ –±—É–¥–µ—Ç:

```js
export async function getStaticProps({ locale }) {
  // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç—ã –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ `API`
  const res = await fetch(`https://example.com/posts?locale=${locale}`)
  const posts = await res.json()

  if (posts.length === 0) {
    return {
      notFound: true
    }
  }

  return {
    props: {
      posts
    }
  }
}
```

__–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è__

- `locales`: –º–∞–∫—Å–∏–º—É–º 100 –ª–æ–∫–∞–ª–µ–π
- `domains`: –º–∞–∫—Å–∏–º—É–º 100 –¥–æ–º–µ–Ω–æ–≤

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

[–®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏ —Ç—É—Ç–æ—Ä–∏–∞–ª –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](https://github.com/harryheman/React-Total/blob/main/md/security/security.md).

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `headers` –≤ `next.config.js`. –î–∞–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

```js
// next.config.js
// –°–ø–∏—Å–æ–∫ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
const securityHeaders = []

module.exports = {
  async headers() {
    return [
      {
        // –î–∞–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±—É–¥—É –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ –≤—Å–µ–º —Ä–æ—É—Ç–∞–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
        source: '/(.*)',
        headers: securityHeaders
      }
    ]
  }
}
```

__–ù–∞—Å—Ç—Ä–æ–π–∫–∏__

_`X-DNS-Prefetch-Control`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π (prefetching) `DNS`, –ø–æ–∑–≤–æ–ª—è—è –±—Ä–∞—É–∑–µ—Ä–∞–º –∑–∞–±–ª–∞–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, `CSS`, `JS` –∏ —Ç.–¥. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–ª–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Å—Å—ã–ª–∫–µ:

```js
{
  key: 'X-DNS-Prefetch-Control',
  value: 'on'
}
```

_`Strict-Transport-Security`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–∫–∞–∑—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HTTPS` –≤–º–µ—Å—Ç–æ `HTTP`:

```js
{
  key: 'Strict-Transport-Security',
  // 2 –≥–æ–¥–∞
  value: 'max-age=63072000; includeSubDomains; preload'
}
```

_`X-XSS-Protection`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–µ–∂—Å–∞–π—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–∞ –≤ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Security-Policy`:

```js
{
  key: 'X-XSS-Protection',
  value: '1; mode=block'
}
```

_`X-Frame-Options`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ `iframe`. –û–Ω —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫—É `frame-ancestors` –∑–∞–≥–æ–ª–æ–≤–∫–∞ `CSP`:

```js
{
  key: 'X-Frame-Options',
  value: 'SAMEORIGIN'
}
```

_`Permissions-Policy`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –∫–∞–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ `API` –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Ä–∞–Ω—å—à–µ –æ–Ω –Ω–∞–∑—ã–≤–∞–ª—Å—è `Feature-Policy`):

```js
{
  key: 'Permissions-Policy',
  value: 'camera=(), microphone=(), geolocation=()'
}
```

_`X-Content-Type-Options`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Content-Type`:

```js
{
  key: 'X-Content-Type-Options',
  value: 'nosniff'
}
```

_`Referrer-Policy`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–º, –∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–∞–π—Ç–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç:

```js
{
  key: 'Referrer-Policy',
  value: 'origin-when-cross-origin'
}
```

_`Content-Security-Policy`_

–î–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å—Ç–∏–ª–µ–π, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —à—Ä–∏—Ñ—Ç–æ–≤, –º–µ–¥–∏–∞ –∏ –¥—Ä.:

```js
{
  key: 'Content-Security-Policy',
  value: // –ü–æ–ª–∏—Ç–∏–∫–∞ `CSP`
}
```

## API

### Next CLI

`Next CLI` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å, —Å–æ–±–∏—Ä–∞—Ç—å –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

```bash
npx next -h
```

–ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–¥–∞—á–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:

```bash
NODE_OPTIONS='--throw-deprecation' next
NODE_OPTIONS='-r esm' next
NODE_OPTIONS='--inspect' next
```

__–°–±–æ—Ä–∫–∞__

–ö–æ–º–∞–Ω–¥–∞ `next build` —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–æ—É—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:

- —Ä–∞–∑–º–µ—Ä (size) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
- –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π (first load) `JS` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

–§–ª–∞–≥ `--profile` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥:

```bash
next build --profile
```

–§–ª–∞–≥ `--verbose` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥:

```bash
next build --verbose
```

__–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞__

–ö–æ–º–∞–Ω–¥–∞ `next dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–¥–∞, –æ—Ç—á–µ—Ç–∞–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Ç.–¥.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000`. –ü–æ—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `-p`:

```bash
npx next dev -p 4000
```

–î–ª—è —ç—Ç–æ–≥–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`:

```bash
PORT=4000 npx next dev
```

–î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ö–æ—Å—Ç (`0.0.0.0`) –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `-H`:

```bash
npx next dev -H 192.168.1.2
```

__–ü—Ä–æ–¥–∞–∫—à–Ω__

–ö–æ–º–∞–Ω–¥–∞ `next start` –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ. –ü–µ—Ä–µ–¥ —ç—Ç–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é `next build`.

__–õ–∏–Ω—Ç–µ—Ä__

–ö–æ–º–∞–Ω–¥–∞ `next lint` –∑–∞–ø—É—Å–∫–∞–µ—Ç `ESLint` –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö `pages`, `components` –∏ `lib`. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `--dir`:

```bash
next lint --dir utils
```

### Create Next App

CLI `create-next-app` - —ç—Ç–æ –ø—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–≤–∞–Ω–∫—É `Next-–ø—Ä–æ–µ–∫—Ç–∞`.

```bash
npx create-next-app [app-name]
# or
yarn create next-app [app-name]
```

–ò–ª–∏, –µ—Å–ª–∏ –≤–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `TypeScript`:

```bash
npx create-next-app [app-name] --typescript
# or
yarn create next-app [app-name] --ts
```

__–ù–∞—Å—Ç—Ä–æ–π–∫–∏__

- `--ts | --typescript` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `TS-–ø—Ä–æ–µ–∫—Ç–∞`
- `-e, --example [example-name][github-url]` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞. –í `URL` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–∞ –ª—é–±–∞—è –≤–µ—Ç–∫–∞ –∏/–∏–ª–∏ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- `--example-path [path-to-example]`
- `--use-npm`

### `next/router`

__`useRouter`__

–•—É–∫ `useRouter` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç—É `router` –≤ –ª—é–±–æ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```js
import { useRouter } from 'next/router'

export const ActiveLink = ({ children, href }) => {
  const router = useRouter()

  const style = {
    marginRight: 10,
    color: router.asPath === href ? 'green' : 'blue',
  }

  const handleClick = (e) => {
    e.preventDefault()
    router.push(href)
  }

  return (
    <a href={href} onClick={handleClick} style={style}>
      {children}
    </a>
  )
}
```

_–û–±—ä–µ–∫—Ç `router`_

–û–±—ä–µ–∫—Ç `router` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `useRouter` –∏ `withRouter` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- `pathname: string` - —Ç–µ–∫—É—â–∏–π —Ä–æ—É—Ç, –ø—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ `/pages` –±–µ–∑ `basePath` –∏–ª–∏ `locale`
- `query: object` - —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞, —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–∞—è –≤ –æ–±—ä–µ–∫—Ç. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `{}`
- `asPath: string` - –ø—É—Ç—å (–≤–∫–ª—é—á–∞—è —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞), –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –±–µ–∑ `basePath` –∏–ª–∏ `locale`
- `isFallback: boolean` - –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ?
- `basePath: string` - –∞–∫—Ç–∏–≤–Ω—ã–π –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å
- `locale: string` - –∞–∫—Ç–∏–≤–Ω–∞—è –ª–æ–∫–∞–ª—å
- `locales: string[]` - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–∫–∞–ª–∏
- `defaultLocale: string` - –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –ª–æ–∫–∞–ª—å
- `domainsLocales: Array<{ domain, defaultLocalem locales }>` - –ª–æ–∫–∞–ª–∏ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤
- `isReady: boolean` - –≥–æ—Ç–æ–≤—ã –ª–∏ –ø–æ–ª—è —Ä–æ—É—Ç–µ—Ä–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é? –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ `useEffect`
- `isPreview: boolean` - –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞?

__`router.push`__

–ú–µ—Ç–æ–¥ `router.push` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ `next/link` –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

```bash
router.push(url, as, options)
```

- `url: string | object` - –ø—É—Ç—å –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `as: string | object` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∞–¥—Ä–µ—Å–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- `options` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:
  - `scroll: boolean` - –≤—ã–ø–æ–ª–Ω—è—Ç—å –ª–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫—É –≤ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã? –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `true`
  - `shallow: boolean` - –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—É—Ç—å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `getStaticProps`, `getServerSideProps` –∏–ª–∏ `getInitialProps`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `false`
  - `locale: string` - –ª–æ–∫–∞–ª—å –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/about.js`:

```js
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  return (
    <button className="link" onClick={() => router.push('/about')}>
      –û –Ω–∞—Å
    </button>
  )
}
```

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/post/[pid].js`:

```js
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  return (
    <button className="link" onClick={() => router.push('/post/abc')}>
      –ü–æ–¥—Ä–æ–±–Ω–µ–µ
    </button>
  )
}
```

–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `pages/login.js` (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü):

```js
import { useEffect } from 'react'
import { useRouter } from 'next/router'

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const useUser = () => ({ user: null, loading: false })

export default function Page() {
  const { user, loading } = useUser()
  const router = useRouter()

  useEffect(() => {
    if (!loading && !user) {
      router.push('/login')
    }
  }, [user, loading])

  return user ? <p>–ü—Ä–∏–≤–µ—Ç, {user.name}!</p> : <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
}
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏:

```js
import { useRouter } from 'next/router'

export default function ReadMore({ post }) {
  const router = useRouter()

  return (
    <button
      className='link'
      onClick={() => {
        router.push({
          pathname: '/post/[pid]',
          query: { pid: post.id }
        })
      }}
    >
      –ü–æ–¥—Ä–æ–±–Ω–µ–µ
    </button>
  )
}
```

__`router.replace`__

–ú–µ—Ç–æ–¥ `router.replace` –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—É—Ç—å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `URL` –≤ —Å—Ç–µ–∫ `history`.

```js
router.replace(url, as, options)
```

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

```js
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  return (
    <button className="link" onClick={() => router.replace('/home')}>
      –ì–ª–∞–≤–Ω–∞—è
    </button>
  )
}
```

__`router.prefetch`__

–ú–µ—Ç–æ–¥ `router.prefetch` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. _–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: `next/link` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

```bash
router.prefetch(url, as)
```

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –º—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è. –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è:

```js
import { useCallback, useEffect } from 'react'
import { useRouter } from 'next/router'

export default function Login() {
  const router = useRouter()

  const handleSubmit = useCallback((e) => {
    e.preventDefault()

    fetch('/api/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        /* –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
      }),
    }).then((res) => {
      // –í—ã–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è
      if (res.ok) router.push('/dashboard')
    })
  }, [])

  useEffect(() => {
    // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è
    router.prefetch('/dashboard')
  }, [])

  return (
    <form onSubmit={handleSubmit}>
      {/* –ü–æ–ª—è —Ñ–æ—Ä–º—ã */}
      <button type="submit">–í–æ–π—Ç–∏</button>
    </form>
  )
}
```

__`router.beforePopState`__

–ú–µ—Ç–æ–¥ `router.beforePopState` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `popstate` –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—É—Ç–∏ —Ä–æ—É—Ç–µ—Ä–æ–º.

```js
router.beforePopState(cb)
```

`cb` - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è `popstate`. –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `url: string` - –ø—É—Ç—å –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- `as: string` - `URL`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- `options: object` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `router.push`

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

`beforePopState` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `SSR`, –∫–∞–∫ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ:

```js
import { useEffect } from 'react'
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  useEffect(() => {
    router.beforePopState(({ url, as, options }) => {
      // –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—É—Ç–∏
      if (as !== '/' && as !== '/other') {
        // –ó–∞—Å—Ç–∞–≤–ª—è–µ–º `SSR` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É 404
        window.location.href = as
        return false
      }

      return true
    })
  }, [])

  return <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
}
```

__`router.back`__

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –ü—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `window.history.back()`:

```js
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  return (
    <button className="link" onClick={() => router.back()}>
      –ù–∞–∑–∞–¥
    </button>
  )
}
```

__`router.reload`__

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π `URL`. –ü—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `window.location.reload()`:

```js
import { useRouter } from 'next/router'

export default function Page() {
  const router = useRouter()

  return (
    <button className="link" onClick={() => router.reload()}>
      –û–±–Ω–æ–≤–∏—Ç—å
    </button>
  )
}
```

__`router.events`__

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—é —Å–ª–µ–¥—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π:

- `routeChangeStart(url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ –Ω–∞—á–∞–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ—É—Ç–∞
- `routeChangeComplete(url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ –∫–æ–Ω—Ü–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ—É—Ç–∞
- `routeChangeError(err, url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –∏–ª–∏ –æ—Ç–º–µ–Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ—É—Ç–∞
- `beforeHistoryChange(url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- `hashChangeStart(url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ –Ω–∞—á–∞–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–µ—à-—á–∞—Å—Ç–∏ `URL` (–Ω–æ –Ω–µ —Å–∞–º–æ–≥–æ `URL`)
- `hashChangeComplete(url, { shallow })` - –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ –∫–æ–Ω—Ü–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–µ—à-—á–∞—Å—Ç–∏ `URL` (–Ω–æ –Ω–µ —Å–∞–º–æ–≥–æ `URL`)

_–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ_: –∑–¥–µ—Å—å `url` - —ç—Ç–æ –∞–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤–∫–ª—é—á–∞—è `basePath`.

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

```js
// pages/_app.js
import { useEffect } from 'react'
import { useRouter } from 'next/router'

export default function MyApp({ Component, pageProps }) {
  const router = useRouter()

  useEffect(() => {
    const handleRouteChange = (url, { shallow }) => {
      console.log(
        `–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É ${url} ${
          shallow ? '—Å' : '–±–µ–∑'
        } –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏`
      )
    }

    router.events.on('routeChangeStart', handleRouteChange)

    // –ü—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    // –æ—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏—è —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `off`
    return () => {
      router.events.off('routeChangeStart', handleRouteChange)
    }
  }, [])

  return <Component {...pageProps} />
}
```

__`withRouter`__

–í–º–µ—Å—Ç–æ `useRouter` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `withRouter`:

```js
import { withRouter } from 'next/router'

function Page({ router }) {
  return <p>{router.pathname}</p>
}

export default withRouter(Page)
```

__`TypeScript`__

```ts
import React from 'react'
import { withRouter, NextRouter } from 'next/router'

interface WithRouterProps {
  router: NextRouter
}

interface MyComponentProps extends WithRouterProps {}

class MyComponent extends React.Component<MyComponentProps> {
  render() {
    return <p>{this.props.router.pathname}</p>
  }
}

export default withRouter(MyComponent)
```

### `next/link`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Link`, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π –∏–∑ `next/link`, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `pages` —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

- `pages/index.js`
- `pages/about.js`
- `pages/blog/[slug].js`

–ü—Ä–∏–º–µ—Ä –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —ç—Ç–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º:

```js
import Link from 'next/link'

export default function Home() {
  return (
    <ul>
      <li>
        <Link href="/">
          <a>–ì–ª–∞–≤–Ω–∞—è</a>
        </Link>
      </li>
      <li>
        <Link href="/about">
          <a>–û –Ω–∞—Å</a>
        </Link>
      </li>
      <li>
        <Link href="/blog/hello-world">
          <a>–ü–æ—Å—Ç</a>
        </Link>
      </li>
    </ul>
  )
}
```

`Link` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–ø—ã:

- `href` - –ø—É—Ç—å –∏–ª–∏ `URL` –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–ø
- `as` - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø—É—Ç–∏, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
- `passHref` - —É–∫–∞–∑—ã–≤–∞–µ—Ç `Link` –ø–µ—Ä–µ–¥–∞—Ç—å –ø—Ä–æ–ø `href` –¥–æ—á–µ—Ä–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `false`
- `prefetch` - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - `true`. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –ª—é–±–æ–≥–æ `Link`, –Ω–∞—Ö–æ–¥—è—â–µ–≥–æ—Å—è –≤ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏–ª–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ). –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é `prefetch={false}`. –û–¥–Ω–∞–∫–æ –¥–∞–∂–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –Ω–∞ —Å—Å—ã–ª–∫—É. –î–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è JSON-—Ñ–∞–π–ª –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
- `replace` - –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ `URL` –≤ —Å—Ç–µ–∫. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - `false`
- `scroll` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - `true`
- `shallow` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É—Ç–∏ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ `getStaticProps`, `getServerSideProps` –∏–ª–∏ `getInitialProps`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - `false`
- `locale` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫ –ø—É—Ç–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è –ª–æ–∫–∞–ª—å. `locale` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥—Ä—É–≥—É—é –ª–æ–∫–∞–ª—å. –ö–æ–≥–¥–∞ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `false`, –ø—Ä–æ–ø `href` –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –ª–æ–∫–∞–ª—å

__–†–æ—É—Ç —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏__

–ü—Ä–∏–º–µ—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—É—Ç–∞ –¥–ª—è `pages/blog/[slug].js`:

```js
import Link from 'next/link'

export default function Posts({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link href={`/blog/${encodeURIComponent(post.slug)}`}>
            <a>{post.title}</a>
          </Link>
        </li>
      ))}
    </ul>
  )
}
```

__–ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Ç–µ–≥–∞ `a`__

–ï—Å–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `Link` —è–≤–ª—è–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±–æ—Ä–∞—á–∏–≤–∞—é—â–∏–π `a`, `Link` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–æ–ø `passHref`. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–∞–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∫–∞–∫ `styled-components`. –ë–µ–∑ —ç—Ç–æ–≥–æ —Ç–µ–≥ `a` –Ω–µ –ø–æ–ª—É—á–∏—Ç –∞—Ç—Ä–∏–±—É—Ç `href`, —á—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ `SEO`.

```js
import Link from 'next/link'
import styled from 'styled-components'

// –°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ–±–æ—Ä–∞—á–∏–≤–∞—é—â–∏–π `a`
const RedLink = styled.a`
  color: red;
`

export default function NavLink({ href, name }) {
  // –î–æ–±–∞–≤–ª—è–µ–º `passHref`
  return (
    <Link href={href} passHref>
      <RedLink>{name}</RedLink>
    </Link>
  )
}
```

__–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç__

–ï—Å–ª–∏ –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º `Link` —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è, —Ç–æ –∫—Ä–æ–º–µ `passHref`, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Ä–Ω—É—Ç—å –µ–µ –≤ `React.forwardRef`:

```js
import Link from 'next/link'
import { forwardRef } from 'react'

// `onClick`, `href` –∏ `ref` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã DOM-—ç–ª–µ–º–µ–Ω—Ç—É
const MyButton = forwardRef(({ onClick, href }, ref) => {
  return (
    <a href={href} onClick={onClick} ref={ref}>
      –ö–ª–∏–∫–Ω–∏
    </a>
  )
})

export default function Home() {
  return (
    <Link href="/about" passHref>
      <MyButton />
    </Link>
  )
}
```

__–û–±—ä–µ–∫—Ç `URL`__

`Link` —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç `URL`. –î–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É:

```js
import Link from 'next/link'

export default function Home() {
  return (
    <ul>
      <li>
        <Link
          href={{
            pathname: '/about',
            query: { name: 'test' },
          }}
        >
          <a>–û –Ω–∞—Å</a>
        </Link>
      </li>
      <li>
        <Link
          href={{
            pathname: '/blog/[slug]',
            query: { slug: 'my-post' },
          }}
        >
          <a>–ü–æ—Å—Ç</a>
        </Link>
      </li>
    </ul>
  )
}
```

–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —É –Ω–∞—Å –∏–º–µ—é—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞:

- –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ä–æ—É—Ç: `/about?name=test`
- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç: `/blog/my-post`

__–ó–∞–º–µ–Ω–∞ `URL`__

```js
<Link href="/about" replace>
  <a>–û –Ω–∞—Å</a>
</Link>
```

__–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏__

```js
<Link href="/?page=2" scroll={false}>
  <a>–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ</a>
</Link>
```

### `next/image`

__–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–ø—ã__

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Image` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–ø—ã:

- `src` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ–π —Å—Å—ã–ª–∫–æ–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–ø–∞ `loader` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã, —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ `domains` —Ñ–∞–π–ª–∞ `next.config.js`
- `width` - —à–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –±–µ–∑ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
- `height` - –≤—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –±–µ–∑ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

__–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—ã__

- `layout` - `intrinsic | fixed | responsive | fill`. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `intrinsic`
- `loader` - –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è `URL`. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø—Ä–æ–ø–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ `images` –≤ `next.config.js`. `loader` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `src`, `width` –∏ `quality`

```js
import Image from 'next/image'

const myLoader = ({ src, width, quality }) => `https://example.com/${src}?w=${width}&q=${quality || 75}`

const MyImage = (props) => (
  <Image
    loader={myLoader}
    src="me.png"
    alt=""
    role="presentation"
    width={500}
    height={500}
  />
)
```

- `sizes` - —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —à–∏—Ä–∏–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `100vw` –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="responsive"` –∏–ª–∏ `layout="fill"`
- `quality` - –∫–∞—á–µ—Å—Ç–≤–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç `1` –¥–æ `100`, –≥–¥–µ `100` - –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `75`
- `priority` - –µ—Å–ª–∏ `true`, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è —Ç–∞–∫–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∞
- `placeholder` - –∑–∞–º–µ–Ω–∏—Ç–µ–ª—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —è–≤–ª—è—é—Ç—Å—è `blur` –∏ `empty`. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `empty`. –ö–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è `blur`, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–º–µ–Ω–∏—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–ø–∞ `blurDataURL`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º `src` —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç `JPG`, `PNG`, `WebP` –∏–ª–∏ `AVIF`, `blurDataURL` –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

__–ü—Ä–æ–ø—ã –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è__

- `objectFit` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="fill"`
- `objectPosition` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="fill"`
- `onLoadingComplete` - —Ñ—É–∫–Ω—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–º–µ–Ω–∏—Ç–µ–ª—è
- `lazyBoundary` - —Å—Ç—Ä–æ–∫–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—É—é —Ä–∞–º–∫—É –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –µ–≥–æ –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `200px`
- `unoptimized` - –µ—Å–ª–∏ `true`, –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞, —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∞. –ó–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —è–≤–ª—è–µ—Ç—Å—è `false`

__–î—Ä—É–≥–∏–µ –ø—Ä–æ–ø—ã__

–õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `Image` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É `img`, –∫—Ä–æ–º–µ —Å–ª–µ–¥—É—é—â–∏—Ö:

- `style` - –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `className`
- `srcSet` - —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `ref` - —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `onLoadingComplete`
- `decoding` - –≤—Å–µ–≥–¥–∞ `async`

__–ù–∞—Å—Ç—Ä–æ–π–∫–∏__

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `next.config.js`.

_–î–æ–º–µ–Ω—ã_

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—â–∏—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –∞—Ç–∞–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –∫–æ–¥–∞.

```js
module.exports = {
  images: {
    domains: ['assets.acme.com']
  }
}
```

_–†–∞–∑–º–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤_

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `deviceSizes` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ç–æ—á–µ–∫ –¥–ª—è —à–∏—Ä–∏–Ω—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –≠—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `layout="responsive"` –∏–ª–∏ `layout="fill"`.

```js
// –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
module.exports = {
  images: {
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840]
  }
}
```

_–†–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π_

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `imageSizes` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞. –≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –º–∞—Å—Å–∏–≤–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—á–Ω—è —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (srcset) –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

```js
module.exports = {
  images: {
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384]
  }
}
```

### `next/head`

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Head` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –≤ `head` —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```js
import Head from 'next/head'

export default function IndexPage() {
  return (
    <div>
      <Head>
        <title>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</title>
        <meta name="viewport" content="initial-scale=1.0, width=device-width" />
      </Head>
      <p>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</p>
    </div>
  )
}
```

–ü—Ä–æ–ø `key` –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–≥–∏:

```js
import Head from 'next/head'

export default function IndexPage() {
  return (
    <div>
      <Head>
        <title>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</title>
        <meta property="og:title" content="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã" key="title" />
      </Head>
      <Head>
        <meta property="og:title" content="–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã" key="title" />
      </Head>
      <p>–ü—Ä–∏–≤–µ—Ç, –Ω–∞—Ä–æ–¥!</p>
    </div>
  )
}
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω —Ç–æ–ª—å–∫–æ `<meta property="og:title" content="–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã" key="title" />`.

–ö–æ–Ω—Ç–µ–Ω—Ç `head` —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

`title`, `meta` –∏ –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä—è–º—ã–º–∏ –ø–æ—Ç–æ–º–∫–∞–º–∏ `Head`. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –æ–¥–∏–Ω `<React.Fragment>` –∏–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∏–∑ –º–∞—Å—Å–∏–≤–∞.

### `next/server`

–ü–æ—Å—Ä–µ–¥–Ω–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `middleware`, –Ω–∞—Ö–æ–¥—è—â–µ–π—Å—è –≤ —Ñ–∞–π–ª–µ `_middleware`. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö `FetchEvent`, `Response` –∏ `Request`.

–≠—Ç–∏ –Ω–∞—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏:

```ts
import type { NextRequest, NextFetchEvent } from 'next/server'

export type Middleware = (
  request: NextRequest,
  event: NextFetchEvent
) => Promise<Response | undefined> | Response | undefined
```

–§—É–Ω–∫—Ü–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è `middleware`. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ. –§—É–Ω–∫—Ü–∏—è —Ç–∞–∫–∂–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π.

__`NextRequest`__

–û–±—ä–µ–∫—Ç `NextRequest` —Ä–∞—Å—à–∏—Ä—è–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Request` —Å–ª–µ–¥—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `cookies` - –∫—É–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
- `nextUrl` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π, —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `URL`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–∫–∏–º —Å–≤–æ–π—Å—Ç–≤–∞–º, –∫–∞–∫ `pathname`, `basePath`, `trailingSlash` –∏ `i18n`
- `geo` - –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ
  - `country` - –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã
  - `region` - –∫–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞
  - `city` - –≥–æ—Ä–æ–¥
  - `latitude` - –¥–æ–ª–≥–æ—Ç–∞
  - `longitude` - —à–∏—Ä–æ—Ç–∞
- `ip` - IP-–∞–¥—Ä–µ—Å –∑–∞–ø—Ä–æ—Å–∞
- `ua` - –∞–≥–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

`NextRequest` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ `Request`.

```ts
import type { NextRequest } from 'next/server'
```

__`NextFetchEvent`__

`NextFetchEvent` —Ä–∞—Å—à–∏—Ä—è–µ—Ç –æ–±—ä–µ–∫—Ç `FetchEvent` –º–µ—Ç–æ–¥–æ–º `waitUntil`.

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, `waitUntil` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ç–∞–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫, –∫–∞–∫ `Sentry`.

```ts
import type { NextFetchEvent } from 'next/server'
```

__`NextResponse`__

`NextResponse` —Ä–∞—Å—à–∏—Ä—è–µ—Ç `Response` —Å–ª–µ–¥—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `cookies` - –∫—É–∫–∏ –æ—Ç–≤–µ—Ç–∞
- `redirect()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `NextResponse` —Å –Ω–∞–±–æ—Ä–æ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (redirects)
- `rewrite()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `NextResponse` —Å –Ω–∞–±–æ—Ä–æ–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å–µ–π (rewrites)
- `next()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `NextResponse`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤

```ts
import { NextResponse } from 'next/server'
```

## `next.config.js`

–§–∞–π–ª `next.config.js` –∏–ª–∏ `next.config.mjs` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `Next.js`.

–ü—Ä–∏–º–µ—Ä `next.config.js`:

```js
/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
  /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
}

module.exports = nextConfig
```

–ü—Ä–∏–º–µ—Ä `next.config.mjs`:

```js
/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
  /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
}

export default nextConfig
```

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:

```js
module.exports = (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
  }
  return nextConfig
}
```

`phase` - —ç—Ç–æ —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –î–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ñ–∞–∑–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è:

- `PHASE_EXPORT`
- `PHASE_PRODUCTION_BUILD`
- `PHASE_PRODUCTION_SERVER`
- `PHASE_DEVELOPMENT_SERVER`

–§–∞–∑—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ `next/constants`:

```js
const { PHASE_DEVELOPMENT_SERVER } = require('next/constants')

module.exports = (phase, { defaultConfig }) => {
  if (phase === PHASE_DEVELOPMENT_SERVER) {
    return {
      /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ */
    }
  }

  return {
    /* –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
  }
}
```

__–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è__

_–ü—Ä–∏–º–µ—Ä_

```js
module.exports = {
  env: {
    someKey: 'some-value'
  }
}
```

_–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ_

```js
export default function Page() {
  return <h1>–ó–Ω–∞—á–µ–Ω–∏–µ–º `someKey` —è–≤–ª—è–µ—Ç—Å—è `{process.env.someKey}`</h1>
}
```

_–†–µ–∑—É–ª—å—Ç–∞—Ç_

```js
export default function Page() {
  return <h1>–ó–Ω–∞—á–µ–Ω–∏–µ–º `someKey` —è–≤–ª—è–µ—Ç—Å—è `some-value`</h1>
}
```

__–ó–∞–≥–æ–ª–æ–≤–∫–∏__

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `headers` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```js
module.exports = {
  async headers() {
    return [
      {
        source: '/about',
        headers: [
          {
            key: 'x-custom-header',
            value: '–∫–∞—Å—Ç–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞',
          },
          {
            key: 'x-another-custom-header',
            value: '–µ—â–µ –æ–¥–Ω–æ –∫–∞—Å—Ç–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞'
          }
        ]
      }
    ]
  }
}
```

`headers` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ `source` –∏ `headers`:

- `source` - –∞–¥—Ä–µ—Å –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- `headers` - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ `key` –∏ `value`

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `basePath: false | undefined` - –µ—Å–ª–∏ `false`, `basePath` –Ω–µ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏, –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø–µ—Ä–µ–∑–∞–ø–∏—Å–µ–π
- `locale: false | undefined` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –¥–æ–ª–∂–Ω–∞ –ª–∏ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –≤–∫–ª—é—á–∞—Ç—å—Å—è –ª–æ–∫–∞–ª—å
- `has` - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ `type`, `key` –∏ `value`

–ï—Å–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–≤–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏, –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞.

_–ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø—É—Ç–µ–π_

–†–∞–∑—Ä–µ—à–µ–Ω –ø–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø—É—Ç–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Ç—å `/blog/:slug` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/blog/hello-world` (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π):

```js
module.exports = {
  async headers() {
    return [
      {
        source: '/blog/:slug',
        headers: [
          {
            key: 'x-slug',
            value: ':slug', // –°–æ–≤–ø–∞–≤—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π
          },
          {
            key: 'x-slug-:slug', // –°–æ–≤–ø–∞–≤—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π
            value: '–∫–∞—Å—Ç–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞'
          }
        ]
      }
    ]
  }
}
```

_–ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø—É—Ç–µ–π_

–î–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `*` –ø–æ—Å–ª–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `/blog/:slug*` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/blog/a/b/c/d/hello-world`:

```js
module.exports = {
  async headers() {
    return [
      {
        source: '/blog/:slug*',
        headers: [
          {
            key: 'x-slug',
            value: ':slug*',
          },
          {
            key: 'x-slug-:slug*',
            value: '–∫–∞—Å—Ç–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞'
          }
        ]
      }
    ]
  }
}
```

_–ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø—É—Ç–µ–π —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π_

–î–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ –ø–æ—Å–ª–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `/blog/:slug(\\d{1,})` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/blog/123`, –Ω–æ –Ω–µ —Å `/blog/abc`:

```js
module.exports = {
  async headers() {
    return [
      {
        source: '/blog/:post(\\d{1,})',
        headers: [
          {
            key: 'x-post',
            value: ':post'
          }
        ]
      }
    ]
  }
}
```

–°–∏–º–≤–æ–ª—ã `( ) { } : * + ?` —Å—á–∏—Ç–∞—é—Ç—Å—è —á–∞—Å—Ç—å—é —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ `source` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—ã—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é `\\`:

```js
module.exports = {
  async headers() {
    return [
      {
        // –≠—Ç–æ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `/english(default)/something`
        source: '/english\\(default\\)/:slug',
        headers: [
          {
            key: 'x-header',
            value: 'some-value'
          }
        ]
      }
    ]
  }
}
```

_–ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –∫—É–∫–∏ –∏ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø—Ä–æ—Å–∞_

–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `has`. –ó–∞–≥–æ–ª–æ–≤–æ–∫ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –ø–æ–ª–µ–π `source` –∏ `has`.

–ó–Ω–∞—á–µ–Ω–∏–µ–º `has` —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `type: string` - `header | cookie | host | query`
- `key: string` - –∫–ª—é—á –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- `value: string | undefined` - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏. –ï—Å–ª–∏ `undefined`, –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å. –î–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–ª—è `hello-world` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `hello-(?<param>.*)`, `world` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è `destination` –∫–∞–∫ `:param`:

```js
module.exports = {
  async headers() {
    return [
      // –ï—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-add-header`,
      // –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-another-header`
      {
        source: '/:path*',
        has: [
          {
            type: 'header',
            key: 'x-add-header',
          },
        ],
        headers: [
          {
            key: 'x-another-header',
            value: 'hello'
          }
        ]
      },
      // –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç `source`, `query` –∏ `cookie`,
      // –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-authorized`
      {
        source: '/specific/:path*',
        has: [
          {
            type: 'query',
            key: 'page',
            // –ó–Ω–∞—á–µ–Ω–∏–µ `page` –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ,
            // –ø–æ—Å–∫–æ–ª—å–∫—É –∑–Ω–∞—á–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–æ –∏ –ø—Ä–∏ —ç—Ç–æ–º
            // –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ –∑–∞—Ö–≤–∞—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `(?<page>home)`
            value: 'home',
          },
          {
            type: 'cookie',
            key: 'authorized',
            value: 'true',
          },
        ],
        headers: [
          {
            key: 'x-authorized',
            value: ':authorized'
          }
        ]
      },
      // –ï—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-authorized` –∏ –æ–Ω
      // —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–∫–æ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-another-header`
      {
        source: '/:path*',
        has: [
          {
            type: 'header',
            key: 'x-authorized',
            value: '(?<authorized>yes|true)',
          },
        ],
        headers: [
          {
            key: 'x-another-header',
            value: ':authorized'
          }
        ]
      },
      // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Ö–æ—Å—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è `example.com`,
      // –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–∞–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
      {
        source: '/:path*',
        has: [
          {
            type: 'host',
            value: 'example.com',
          },
        ],
        headers: [
          {
            key: 'x-another-header',
            value: ':authorized'
          }
        ]
      }
    ]
  }
}
```

_`basePath` –∏ `i18n`_

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `basePath`, –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –∑–Ω–∞—á–µ–Ω–∏—é `source`, –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ `basePath: false`:

```js
module.exports = {
  basePath: '/docs',

  async headers() {
    return [
      {
        source: '/with-basePath', // —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è /docs/with-basePath
        headers: [
          {
            key: 'x-hello',
            value: 'world'
          }
        ]
      },
      {
        source: '/without-basePath', // –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è
        headers: [
          {
            key: 'x-hello',
            value: 'world'
          }
        ],
        basePath: false
      }
    ]
  }
}
```

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `i18n` –∫ –∑–Ω–∞—á–µ–Ω–∏—é `source` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è `locales`, –µ—Å–ª–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ `locale: false` - –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–Ω–∞—á–µ–Ω–∏–µ `source` –¥–æ–ª–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å –ª–æ–∫–∞–ª–∏:

```js
module.exports = {
  i18n: {
    locales: ['en', 'fr', 'de'],
    defaultLocale: 'en',
  },

  async headers() {
    return [
      {
        source: '/with-locale', // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –ª–æ–∫–∞–ª–µ–π
        headers: [
          {
            key: 'x-hello',
            value: 'world'
          }
        ]
      },
      {
        // —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª–∏
        source: '/nl/with-locale-manual',
        locale: false,
        headers: [
          {
            key: 'x-hello',
            value: 'world'
          }
        ]
      },
      {
        // —ç—Ç–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `/`, –ø–æ—Å–∫–æ–ª—å–∫—É `en` —è–≤–ª—è–µ—Ç—Å—è `defaultLocale`
        source: '/en',
        locale: false,
        headers: [
          {
            key: 'x-hello',
            value: 'world'
          }
        ]
      },
      {
        // —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ /(en|fr|de)/(.*), –ø–æ—ç—Ç–æ–º—É –Ω–µ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–æ—É—Ç–∞–º–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è, —Ç–∞–∫–∏–º–∏ –∫–∞–∫
        // `/` –∏–ª–∏ `/fr`, –∞ —Å `/:path*` –±—É–¥–µ—Ç
        source: '/(.*)',
        headers: [
          {
            key: 'x-hello',
            value: 'worlld'
          }
        ]
      }
    ]
  }
}
```

__–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `Webpack`__

–ü–µ—Ä–µ–¥ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–µ–π –í–µ–±–ø–∞–∫–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `Next.js` –Ω–µ –∏–º–µ–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

–ü—Ä–∏–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `webpack`:

```js
module.exports = {
  webpack: (config, { buildId, dev, isServer, defaultLoaders, webpack }) => {
    // –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
    return config
  }
}
```

–î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã: –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –µ—â–µ –æ–¥–∏–Ω –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–π—Å—Ç–≤–∞ `isServer`.

–í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–º —Ñ—É–Ω–∫—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

- `buildId: string` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–±–æ—Ä–∫–∏
- `dev: boolean` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `isServer: boolean` - –µ—Å–ª–∏ `true`, –∑–Ω–∞—á–∏—Ç, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
- `defaultLocales: object` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ª–æ–∞–¥–µ—Ä—ã:
  - `babel: object` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `babel-loader`

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `defaultLoaders.babel`:

```js
module.exports = {
  webpack: (config, options) => {
    config.module.rules.push({
      test: /\.mdx/,
      use: [
        options.defaultLoaders.babel,
        {
          loader: '@mdx-js/loader',
          options: pluginOptions.options
        }
      ]
    })

    return config
  }
}
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `distDir` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏:

```js
module.exports = {
  distDir: 'build'
}
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `generateBuildId` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–±–æ—Ä–∫–∏:

```js
module.exports = {
  generateBuildId: async () => {
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–µ—à –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≥–∏—Ç-–∫–æ–º–º–∏—Ç–∞
    return 'my-build-id'
  }
}
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é `eslint` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```js
module.exports = {
  eslint: {
    ignoreDuringBuilds: true
  }
}
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è `typescript` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```js
module.exports = {
  typescript: {
    ignoreBuildErrors: true
  }
}
```
